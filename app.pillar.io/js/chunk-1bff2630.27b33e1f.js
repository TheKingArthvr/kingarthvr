(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1bff2630"],{"671b":function(t,e,a){"use strict";a("e50c")},8107:function(t,e,a){},"8a5d":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"v-spinner"},[a("div",{staticClass:"v-pulse v-pulse1",style:[t.spinnerStyle,t.spinnerDelay1]}),a("div",{staticClass:"v-pulse v-pulse2",style:[t.spinnerStyle,t.spinnerDelay2]}),a("div",{staticClass:"v-pulse v-pulse3",style:[t.spinnerStyle,t.spinnerDelay3]})])},i=[],s={name:"PulseLoader",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"#5dc596"},size:{type:String,default:"15px"},margin:{type:String,default:"2px"},radius:{type:String,default:"100%"}},data:function(){return{spinnerStyle:{backgroundColor:this.color,width:this.size,height:this.size,margin:this.margin,borderRadius:this.radius,display:"inline-block",animationName:"v-pulseStretchDelay",animationDuration:"0.75s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(.2,.68,.18,1.08)",animationFillMode:"both"},spinnerDelay1:{animationDelay:"0.12s"},spinnerDelay2:{animationDelay:"0.24s"},spinnerDelay3:{animationDelay:"0.36s"}}}},r=s,l=(a("671b"),a("2877")),o=Object(l["a"])(r,n,i,!1,null,null,null);e["a"]=o.exports},a54e:function(t,e,a){"use strict";a("8107")},c3e2:function(t,e,a){"use strict";a.r(e);var n,i,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"\n\t\tflex flex-col\n\t\tjustify-center\n\t\tmin-h-screen\n\t\tpy-12\n\t\tbg-gray-50\n\t\tsm:px-6\n\t\tlg:px-8\n\t"},[t.bookingId?t.$apollo.loading?a("loader",{attrs:{color:"#4f46e5"}}):t.booking&&"CANCELLED"===t.booking.status?a("div",{staticClass:"sm:mx-auto sm:w-full sm:max-w-md"},[a("img",{staticClass:"w-auto h-12 mx-auto",attrs:{src:t.$data.$cdn+"/logos/athlane/logo_black_horz.png",alt:"Pillar"}}),a("h2",{staticClass:"mt-6 text-3xl font-extrabold text-center text-gray-900"},[t._v(" Your experience has already been cancelled. ")])]):t.hasSubmitted?a("div",{staticClass:"sm:mx-auto sm:w-full sm:max-w-md"},[a("img",{staticClass:"w-auto h-12 mx-auto",attrs:{src:t.$data.$cdn+"/logos/athlane/logo_black_horz.png",alt:"Pillar"}}),a("h2",{staticClass:"mt-6 text-3xl font-extrabold text-center text-gray-900"},[t._v(" Your cancellation is processed and a refund is on its way. ")])]):a("div",{staticClass:"sm:mx-auto sm:w-full sm:max-w-md"},[a("img",{staticClass:"w-auto h-12 mx-auto",attrs:{src:t.$data.$cdn+"/logos/athlane/logo_black_horz.png",alt:"Pillar"}}),a("h2",{staticClass:"mt-6 text-3xl font-extrabold text-center text-gray-900"},[t._v(" Order Cancellation ")]),a("p",{staticClass:"mt-2 font-medium text-center text-indigo-600 text-md max-w"},[t._v(" Cancel your upcoming experience with "+t._s(t.experience.influencer.alias)+" ")]),a("div",{staticClass:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},[a("div",{staticClass:"px-4 py-8 bg-white shadow sm:rounded-lg sm:px-10"},[t.isPastEvent?a("div",{staticClass:"p-4 rounded-md bg-red-50"},[a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-shrink-0"},[a("svg",{staticClass:"w-5 h-5 text-red-400",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"}})])]),t._m(0)])]):a("form",{staticClass:"space-y-6",on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[t.isRefundable.refundable?t._e():a("div",{staticClass:"p-4 border-l-4 border-yellow-400 bg-yellow-50"},[a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-shrink-0"},[a("svg",{staticClass:"w-5 h-5 text-yellow-400",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"}})])]),a("div",{staticClass:"ml-3"},[a("p",{staticClass:"text-sm text-yellow-700"},[t._v(" "+t._s(t.isRefundable.explanation)+" ")])])])]),a("Select",{attrs:{label:"Cancellation Reason",required:""},model:{value:t.cancellation.cancellation_type,callback:function(e){t.$set(t.cancellation,"cancellation_type",e)},expression:"cancellation.cancellation_type"}},t._l(t.CANCELLATION_TYPES,(function(e){return a("option",{key:e.value,domProps:{value:e.value}},[t._v(" "+t._s(e.text)+" ")])})),0),a("text-area",{attrs:{label:"Please elaborate (max 500 chars.)",characterLimit:"500"},model:{value:t.cancellation.cancellation_reason,callback:function(e){t.$set(t.cancellation,"cancellation_reason",e)},expression:"cancellation.cancellation_reason"}}),t.error?a("div",{staticClass:"p-4 rounded-md bg-red-50"},[a("div",{staticClass:"flex"},[a("div",{staticClass:"flex-shrink-0"},[a("svg",{staticClass:"w-5 h-5 text-red-400",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"}})])]),a("div",{staticClass:"ml-3"},[a("h3",{staticClass:"text-sm font-medium text-red-800"},[t._v(" There was an error with your submission ")]),a("div",{staticClass:"mt-2 text-sm text-red-700"},[t._v(" "+t._s(t.error)+" ")])])])]):t._e(),a("athlane-button",{staticClass:"w-full",attrs:{text:"Submit",icon:t.isSubmitting?"fas fa-spinner fa-spin":null,disabled:!t.cancellation.cancellation_type}})],1)])])]):a("div",{staticClass:"sm:mx-auto sm:w-full sm:max-w-md"},[a("img",{staticClass:"w-auto h-12 mx-auto",attrs:{src:t.$data.$cdn+"/logos/athlane/logo_black_horz.png",alt:"Pillar"}}),a("h2",{staticClass:"mt-6 text-3xl font-extrabold text-center text-gray-900"},[t._v(" Sorry! Your booking is invalid. ")])])],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ml-3"},[a("h3",{staticClass:"text-sm font-medium text-red-800"},[t._v(" Invalid cancellation ")]),a("div",{staticClass:"mt-2 text-sm text-red-700"},[t._v(" Sorry! This experience has already happened. ")])])}],l=a("0122"),o=a("f3f3"),c=a("c964"),u=a("e5e9"),d=(a("96cf"),a("f817")),p=a("5184"),h=a("f5a3"),m=a("6e77"),x=a("8a5d"),b=Object(p["a"])(n||(n=Object(u["a"])(["\n\tquery GetCancellationDetails($experience_id: uuid!, $booking_id: uuid!) {\n\t\texperience: shop_experience(\n\t\t\twhere: { experience_id: { _eq: $experience_id } }\n\t\t) {\n\t\t\ttitle\n\t\t\tcancellation_policy\n\t\t\tinfluencer {\n\t\t\t\tid\n\t\t\t\talias\n\t\t\t\tuser {\n\t\t\t\t\tid\n\t\t\t\t\tfull_name\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tbooking: shop_experience_booking(\n\t\t\twhere: { booking_id: { _eq: $booking_id } }\n\t\t) {\n\t\t\tstatus\n\t\t\tbooking_id\n\t\t\tpayment_intent_id\n\t\t\tavailability {\n\t\t\t\tavailability_id\n\t\t\t\tstart_time\n\t\t\t}\n\t\t}\n\t}\n"]))),f=Object(p["a"])(i||(i=Object(u["a"])(["\n\tmutation UpdateBooking(\n\t\t$booking_id: uuid!\n\t\t$changes: shop_experience_booking_set_input!\n\t) {\n\t\tupdate_shop_experience_booking(\n\t\t\twhere: { booking_id: { _eq: $booking_id } }\n\t\t\t_set: $changes\n\t\t) {\n\t\t\taffected_rows\n\t\t}\n\t}\n"]))),g=[{value:"ACCIDENT",text:"I created this order on accident"},{value:"NOT_DESIRED",text:"I no longer desire this experience"},{value:"RESCHEDULE",text:"I wish to reschedule this experience"},{value:"OTHER",text:"Other"}],v={props:{experienceId:String},components:{TextArea:h["a"],Loader:x["a"],Select:m["a"]},data:function(){return{CANCELLATION_TYPES:g,experience:null,booking:null,bookingId:null,cancellation:{cancellation_type:"",cancellation_reason:null},isSubmitting:!1,hasSubmitted:!1,error:null}},created:function(){this.$data.bookingId=this.$route.query.bookingId},computed:{isPastEvent:function(){if(!this.$data.booking)return!1;var t=new Date(this.$data.booking.availability.start_time);return t<=new Date},isRefundable:function(){if(!this.$data.booking||!this.$data.experience)return{refundable:!1,explanation:"Sorry. There's no data available for us to process a cancellation."};if(this.isPastEvent)return{refundable:!1,explanation:"Cancellations are not accepted for events that have already passed."};var t=this.$data.experience.cancellation_policy;if("loose"===t)return{refundable:!0,explanation:null};if("strict"===t)return{refundable:!1,explanation:"This experience has a strict cancellation policy. You may still cancel, but you will not be refunded for this experience."};if("24hr"!=this.$data.experience.cancellation_policy)return{refundable:!1,explanation:"This experience has an invalid cancellation policy. Please contact us at support@athlane.com for more details."};var e=new d["a"](this.$data.booking.availability.start_time),a=d["a"].duration(e.diff(Object(d["a"])())),n=a.asMinutes()>1440;return{refundable:n,explanation:"This experience has a 24-hour cancellation policy. You may still cancel, but you will not be refunded for this experience."}}},methods:{onSubmit:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a,n,i,s,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$data.error=null,this.$data.cancellation.cancellation_type){t.next=3;break}return t.abrupt("return");case 3:if(this.$data.isSubmitting=!0,e={booking_id:this.$route.query.bookingId,changes:Object(o["a"])({status:"CANCELLED"},this.$data.cancellation)},t.prev=5,!this.isRefundable.refundable){t.next=14;break}return a={mode:"EXPERIENCE",payment_intent_id:this.$data.booking.payment_intent_id,experience_id:this.$data.experience.experience_id,booking_id:this.$route.query.bookingId,availability_id:this.$data.booking.availability_id},t.next=10,this.$axios.post("/payments/refund",a);case 10:if(n=t.sent,i=n.data,"succeeded"!==!i.status){t.next=14;break}throw"Stripe error";case 14:return t.next=16,this.$apollo.mutate({mutation:f,variables:e});case 16:this.$data.hasSubmitted=!0,t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](5),console.error(t.t0,t.t0.response),"object"==Object(l["a"])(t.t0)&&200!=(null===(s=t.t0.response)||void 0===s?void 0:s.status)?this.error=null===(r=t.t0.response)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.message:this.error="An error occurred while processing your cancellation. Please contact us at support@athlane.com";case 23:this.$data.isSubmitting=!1;case 24:case"end":return t.stop()}}),t,this,[[5,19]])})));function e(){return t.apply(this,arguments)}return e}()},apollo:{data:{query:b,variables:function(){return{experience_id:this.$props.experienceId,booking_id:this.$route.query.bookingId}},update:function(t){var e=t.experience,a=t.booking;this.$data.experience=e[0],this.$data.booking=a[0]}}}},y=v,_=a("2877"),w=Object(_["a"])(y,s,r,!1,null,null,null);e["default"]=w.exports},e50c:function(t,e,a){},f5a3:function(t,e,a){"use strict";var n,i,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"flex flex-col"},[t.label||t.subtext?a("div",{staticClass:"mb-1"},[t.label?a("div",{staticClass:"block text-sm font-medium text-gray-700"},[t._v(" "+t._s(t.label)+" "),t.required?a("span",{staticClass:"ml-1 text-yellow-500"},[t._v("*")]):t._e()]):t._e(),t.subtext?a("span",{staticClass:"block text-xs text-gray-600 dark:text-gray-300"},[t._v(" "+t._s(t.subtext)+" ")]):t._e()]):t._e(),a("div",{staticClass:"relative"},[a("resize-auto",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.resize;return[a("textarea",t._b({staticClass:"box-border block w-full h-32 min-w-0 px-4 py-3 text-black placeholder-gray-400 transition-colors duration-100 ease-in-out bg-white border border-gray-200 rounded-lg shadow-sm appearance-none resize-none dark:bg-gray-600 dark:text-white dark:border-gray-700 dark:focus:border-indigo-300 dark:bg-gray-800 focus:border-indigo-500 focus:outline-none",class:{"border-red-500":t.$props.error,"shadow-sm":!t.$props.flat},attrs:{maxlength:t.characterLimit},domProps:{value:t.value},on:{input:function(e){return t.onInput(e,n)},focus:function(e){t.active=!0},blur:function(e){t.active=!1},change:function(e){return t.$emit("change",e.target.value)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.$emit("enter",e)}}},"textarea",t.$attrs,!1))]}}])})],1),t.characterLimit&&t.showCharacters?a("div",{staticClass:"mt-1 text-xs text-gray-400"},[t._v(" "+t._s(t.value?t.value.length:0)+" / "+t._s(t.characterLimit)+" characters ")]):t._e(),!t.hideError&&t.$props.error?a("span",{staticClass:"block my-1 text-sm tracking-wide text-red-500"},[t._v(" "+t._s(t.errorMessage)+" ")]):t._e()])},r=[],l=a("2b0e"),o={name:"ResizeAuto",methods:{resize:function(t){t.target.style.height="auto",t.target.style.height="".concat(t.target.scrollHeight,"px")}},mounted:function(){var t=this;this.$nextTick((function(){var e=t.$el.scrollHeight+10;t.$el.setAttribute("style","height:".concat(e,"px"))}))},render:function(){return this.$scopedSlots.default({resize:this.resize})}},c=o,u=a("2877"),d=Object(u["a"])(c,n,i,!1,null,null,null),p=d.exports,h=l["default"].extend({inheritAttrs:!1,components:{ResizeAuto:p},props:{showCharacters:{type:Boolean,default:!1},characterLimit:{type:String,default:null},error:{type:String,required:!1},hideError:{type:Boolean,default:!1},flat:{type:Boolean,default:!1},label:{type:String,required:!1},subtext:{type:String,required:!1},required:{type:Boolean,default:!1},value:{type:String,required:!1},dynamicResize:{type:Boolean,default:!1}},data:function(){return{active:!1}},computed:{errorMessage:function(){var t;return null!==(t=this.$props.error)&&void 0!==t?t:"Error: "}},methods:{onInput:function(t,e){this.$emit("input",t.target.value),!this.$props.dynamicResize||e(t)}}}),m=h,x=(a("a54e"),Object(u["a"])(m,s,r,!1,null,null,null));e["a"]=x.exports}}]);
//# sourceMappingURL=chunk-1bff2630.27b33e1f.js.map