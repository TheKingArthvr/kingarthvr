(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-196df552"],{1280:function(e,n,i){"use strict";var t,a,s=function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"w-screen h-screen center",on:{click:function(n){return n.stopPropagation(),e.$emit("close")}}},[i("div",{staticClass:"\n\t\t\tflex flex-col\n\t\t\tw-full\n\t\t\tmax-w-2xl\n\t\t\tpx-5\n\t\t\tpy-10\n\t\t\tspace-y-6\n\t\t\tbg-white\n\t\t\tshadow-md\n\t\t",on:{click:function(e){e.stopPropagation()}}},[i("div",{staticClass:"flex items-center text-light"},[i("img",{staticClass:"w-16 h-16 rounded-full",attrs:{src:e.streamer.profile_image_url||e.unknownStreamerLogo},on:{error:e.onImageError}}),i("span",{staticClass:"ml-2 font-medium"},[e._v(" "+e._s(e.streamer.display_name)+" ")])]),e.$apollo.loading?e._e():i("div",[e.campaigns.length||e.campaignId?i("div",{staticClass:"flex flex-col space-y-6"},[e.campaignId&&e.influencer?e._e():i("div",{staticClass:"flex flex-col p-2 space-y-2 bg-gray-100 rounded"},[e.campaignId?e._e():i("Select",{attrs:{label:"Select Campaign",icon:"fas fa-rocket-launch",hideError:""},model:{value:e.selectedCampaignId,callback:function(n){e.selectedCampaignId=n},expression:"selectedCampaignId"}},[i("option",{domProps:{value:null}},[e._v("Select a Campaign")]),e._l(e.campaigns,(function(n){return i("option",{key:n.id,domProps:{value:n.id}},[e._v(" "+e._s(n.title)+" ")])}))],2),e.influencer||e.influencerId?e._e():i("athlane-field",{attrs:{label:"Email",icon:"fas fa-envelope",hideError:""},model:{value:e.newInfluencer.user.email,callback:function(n){e.$set(e.newInfluencer.user,"email",n)},expression:"newInfluencer.user.email"}})],1),i("div",{staticClass:"flex w-full space-x-2"},[i("athlane-button",{staticClass:"w-full",attrs:{mode:"tertiary",text:"Cancel"},on:{click:function(n){return e.$emit("close")}}}),i("athlane-button",{staticClass:"w-full",attrs:{text:"Confirm",disabled:!e.selectedCampaignId},on:{click:e.onClickContinue}})],1)]):i("div",{staticClass:"flex flex-col space-y-6"},[i("div",{staticClass:"p-2 text-gray-800 bg-gray-100 rounded"},[e._v(" You have no current campaigns. Create one before partnering with a streamer. ")]),i("div",{staticClass:"flex space-x-2"},[i("athlane-button",{staticClass:"w-full",attrs:{mode:"tertiary",text:"Cancel"},on:{click:function(n){return e.$emit("close")}}}),i("athlane-button",{staticClass:"w-full",attrs:{text:"Go to Campaigns"},on:{click:function(n){return n.stopPropagation(),e.$router.push("/campaigns")}}})],1)])])])])},r=[],l=i("e5e9"),o=i("5184"),d=i("6e77"),c=i("b104"),u=Object(o["a"])(t||(t=Object(l["a"])(['\n\tquery GetCampaignsIdAndTitle($org_id: uuid!) {\n\t\tcampaigns: campaigns_campaign(\n\t\t\twhere: { org_id: { _eq: $org_id }, status: { _eq: "ACTIVE" } }\n\t\t) {\n\t\t\tid\n\t\t\ttitle\n\t\t}\n\t}\n']))),m=Object(o["a"])(a||(a=Object(l["a"])(["\n\tquery getInfluencerByStreamerID($streamer_id: uuid!) {\n\t\tinfluencer: users_influencer(\n\t\t\twhere: { streamer_id: { _eq: $streamer_id } }\n\t\t) {\n\t\t\tid\n\t\t}\n\t}\n"]))),v={props:{streamer:Object,campaignId:String,influencerId:String},components:{Select:d["a"]},data:function(){return{unknownStreamerLogo:c["M"],campaigns:[],influencer:null,newInfluencer:{user:{email:""},alias:""},selectedCampaignId:null}},created:function(){var e;this.selectedCampaignId=this.$props.campaignId||null,this.newInfluencer.alias=this.streamer.display_name,this.newInfluencer.user.email=null===(e=this.streamer.socials)||void 0===e?void 0:e.EMAIL},methods:{onImageError:function(e){e.target.src=this.unknownStreamerLogo},onClickContinue:function(){var e;if(this.selectedCampaignId){var n={campaignId:this.selectedCampaignId,influencerId:this.$props.influencerId||(null===(e=this.influencer)||void 0===e?void 0:e.id),newInfluencer:this.newInfluencer};this.$emit("complete",n)}}},apollo:{influencer:{query:m,variables:function(){return{streamer_id:this.streamer.streamer_id||""}},update:function(e){var n=e.influencer;return n[0]},skip:function(){return!!this.$props.influencerId}},campaigns:{query:u,variables:function(){return{org_id:this.$organization.id}},skip:function(){return!!this.$props.campaignId}}}},f=v,k=i("2877"),p=Object(k["a"])(f,s,r,!1,null,null,null);n["a"]=p.exports},2501:function(e,n,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetConversationAuxInfo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"conversation_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"uuid"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"includeInfluencerSocials"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},defaultValue:{kind:"BooleanValue",value:!0},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"conversation"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"conversation_id"}}}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"references"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"activation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_created"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tasks_aggregate"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"aggregate"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sum"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"tasks"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"task_completion_aggregate"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"aggregate"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[{kind:"Argument",name:{kind:"Name",value:"distinct"},value:{kind:"BooleanValue",value:!0}}],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"legal"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contract"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body_html"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"campaign"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"participants"},arguments:[{kind:"Argument",name:{kind:"Name",value:"order_by"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"user"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"first_name"},value:{kind:"EnumValue",value:"asc"}}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"full_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"influencer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Influencer"},directives:[]}]}}]}}]}},{kind:"Field",alias:{kind:"Name",value:"files"},name:{kind:"Name",value:"messages"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"file_url"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_is_null"},value:{kind:"BooleanValue",value:!1}}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"file_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:1110}};t.loc.source={body:'#import "../fragments/Influencer.fragment.gql"\n\nquery GetConversationAuxInfo(\n  $conversation_id: uuid!\n  $includeInfluencerSocials: Boolean! = true\n) {\n  conversation(where: { id: { _eq: $conversation_id } }) {\n    id\n    title\n    references {\n      activation {\n        id\n        status\n        time_created\n        tasks_aggregate {\n          aggregate {\n            sum {\n              count\n            }\n          }\n        }\n        tasks {\n          task_completion_aggregate {\n            aggregate {\n              count(distinct: true)\n            }\n          }\n        }\n        legal {\n          id\n          contract {\n            id\n            title\n            body_html\n            body\n          }\n        }\n      }\n      campaign {\n        id\n        title\n      }\n    }\n    participants(order_by: { user: { first_name: asc } }) {\n      user {\n        id\n        email\n        full_name\n        profile_image\n        influencer {\n          ...Influencer\n        }\n      }\n    }\n    files: messages(where: { file_url: { _is_null: false } }) {\n      id\n      file_url\n      text\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function s(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)}))}function r(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&n.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){r(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){r(e,n)})),e.definitions&&e.definitions.forEach((function(e){r(e,n)}))}t.definitions=t.definitions.concat(s(i("1ee0").definitions));var l={};function o(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}function d(e,n){var i={kind:e.kind,definitions:[o(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=l[n]||new Set,a=new Set,s=new Set;t.forEach((function(e){s.add(e)}));while(s.size>0){var r=s;s=new Set,r.forEach((function(e){if(!a.has(e)){a.add(e);var n=l[e]||new Set;n.forEach((function(e){s.add(e)}))}}))}return a.forEach((function(n){var t=o(e,n);t&&i.definitions.push(t)})),i}(function(){t.definitions.forEach((function(e){if(e.name){var n=new Set;r(e,n),l[e.name.value]=n}}))})(),e.exports=t,e.exports["GetConversationAuxInfo"]=d(t,"GetConversationAuxInfo")},5696:function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateConversation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"uuid"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"changes"}},type:{kind:"NamedType",name:{kind:"Name",value:"conversation_set_input"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"update_conversation"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}]}}]}},{kind:"Argument",name:{kind:"Name",value:"_set"},value:{kind:"Variable",name:{kind:"Name",value:"changes"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"returning"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:181}};i.loc.source={body:"mutation UpdateConversation($id: uuid, $changes: conversation_set_input) {\n  update_conversation(where: { id: { _eq: $id } }, _set: $changes) {\n    returning {\n      id\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function t(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&n.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){t(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){t(e,n)})),e.definitions&&e.definitions.forEach((function(e){t(e,n)}))}var a={};function s(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}function r(e,n){var i={kind:e.kind,definitions:[s(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=a[n]||new Set,r=new Set,l=new Set;t.forEach((function(e){l.add(e)}));while(l.size>0){var o=l;l=new Set,o.forEach((function(e){if(!r.has(e)){r.add(e);var n=a[e]||new Set;n.forEach((function(e){l.add(e)}))}}))}return r.forEach((function(n){var t=s(e,n);t&&i.definitions.push(t)})),i}(function(){i.definitions.forEach((function(e){if(e.name){var n=new Set;t(e,n),a[e.name.value]=n}}))})(),e.exports=i,e.exports["UpdateConversation"]=r(i,"UpdateConversation")},"5bd8":function(e,n,i){},"64de":function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteConversationParticipant"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"conversation_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"uuid"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"uuid"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"delete_conversation_participant"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"conversation_id"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"conversation_id"}}}]}},{kind:"ObjectField",name:{kind:"Name",value:"user_id"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"affected_rows"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:276}};i.loc.source={body:"mutation DeleteConversationParticipant(\n    $conversation_id: uuid!,\n    $user_id: uuid!\n) {\n    delete_conversation_participant(\n        where: {\n            conversation_id: { _eq: $conversation_id }\n            user_id: { _eq: $user_id }\n        }\n    ) { affected_rows }\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};function t(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&n.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){t(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){t(e,n)})),e.definitions&&e.definitions.forEach((function(e){t(e,n)}))}var a={};function s(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}function r(e,n){var i={kind:e.kind,definitions:[s(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=a[n]||new Set,r=new Set,l=new Set;t.forEach((function(e){l.add(e)}));while(l.size>0){var o=l;l=new Set,o.forEach((function(e){if(!r.has(e)){r.add(e);var n=a[e]||new Set;n.forEach((function(e){l.add(e)}))}}))}return r.forEach((function(n){var t=s(e,n);t&&i.definitions.push(t)})),i}(function(){i.definitions.forEach((function(e){if(e.name){var n=new Set;t(e,n),a[e.name.value]=n}}))})(),e.exports=i,e.exports["DeleteConversationParticipant"]=r(i,"DeleteConversationParticipant")},8644:function(e,n,i){"use strict";i("5bd8")},d09e:function(e,n,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"subscription",name:{kind:"Name",value:"SubscribeNewFileMessages"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"conversation_ids"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"uuid"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query_time"}},type:{kind:"NamedType",name:{kind:"Name",value:"timestamptz"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"file"},name:{kind:"Name",value:"message"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"conversation_id"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_in"},value:{kind:"Variable",name:{kind:"Name",value:"conversation_ids"}}}]}},{kind:"ObjectField",name:{kind:"Name",value:"time_created"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_gte"},value:{kind:"Variable",name:{kind:"Name",value:"query_time"}}}]}},{kind:"ObjectField",name:{kind:"Name",value:"file_url"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_is_null"},value:{kind:"BooleanValue",value:!1}}]}}]}},{kind:"Argument",name:{kind:"Name",value:"order_by"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"time_created"},value:{kind:"EnumValue",value:"desc"}}]}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Message"},directives:[]},{kind:"Field",name:{kind:"Name",value:"conversation_id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:404}};t.loc.source={body:'#import "../fragments/Message.fragment.gql"\n\nsubscription SubscribeNewFileMessages(\n  $conversation_ids: [uuid!]\n  $query_time: timestamptz\n) {\n  file: message(\n    where: {\n      conversation_id: { _in: $conversation_ids }\n      time_created: { _gte: $query_time }\n      file_url: { _is_null: false }\n    }\n    order_by: { time_created: desc }\n    limit: 1\n  ) {\n    ...Message\n    conversation_id\n  }\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function s(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)}))}function r(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var i=e.type;"NamedType"===i.kind&&n.add(i.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){r(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){r(e,n)})),e.definitions&&e.definitions.forEach((function(e){r(e,n)}))}t.definitions=t.definitions.concat(s(i("d4f0").definitions));var l={};function o(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}function d(e,n){var i={kind:e.kind,definitions:[o(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=l[n]||new Set,a=new Set,s=new Set;t.forEach((function(e){s.add(e)}));while(s.size>0){var r=s;s=new Set,r.forEach((function(e){if(!a.has(e)){a.add(e);var n=l[e]||new Set;n.forEach((function(e){s.add(e)}))}}))}return a.forEach((function(n){var t=o(e,n);t&&i.definitions.push(t)})),i}(function(){t.definitions.forEach((function(e){if(e.name){var n=new Set;r(e,n),l[e.name.value]=n}}))})(),e.exports=t,e.exports["SubscribeNewFileMessages"]=d(t,"SubscribeNewFileMessages")},eaad:function(e,n,i){"use strict";i.r(n);var t=function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"flex flex-col flex-grow overflow-hidden standard-page-container"},[i("div",{staticClass:"flex flex-col overflow-hidden standard-page-inner-container"},[i("athlane-page-header",{staticClass:"z-10 flex-shrink-0 shadow-sm",attrs:{title:"Conversations",text:"Manage your conversations here",showCta:e.enableNewMessage,ctaText:"Create Conversation"},on:{"action-click":function(n){e.showCreateModal=!0}}}),i("div",{staticClass:"flex-grow min-h-0"},[i("div",{staticClass:"grid h-full grid-cols-2 bg-gray-50 md:grid-cols-3 xl:grid-cols-8"},[i("ConversationList",{staticClass:"col-span-1 xl:col-span-2",attrs:{conversationId:e.conversationId},on:{openConversation:function(n){var i=n.id;return i===e.conversationId||e.$router.push("/messages/"+i)}}}),e.conversationId?i("ConversationMessages",{staticClass:"col-span-1 md:col-span-2 lg:col-span-1 xl:col-span-4",attrs:{conversationId:e.conversationId,messageSearch:e.messageSearch}}):e._e(),e.conversationId?i("ConversationSidebarRight",{staticClass:"hidden lg:col-span-1 xl:col-span-2 lg:grid",attrs:{conversationId:e.conversationId,messageSearch:e.messageSearch},on:{"message-search-change":e.onMessageSearchChange}}):e._e()],1)]),e.showCreateModal?i("Modal",{attrs:{open:e.showCreateModal},on:{close:function(n){e.showCreateModal=!1}}},[i("CreateNewConversation",{on:{created:function(n){e.showCreateModal=!1}}})],1):e._e()],1)])},a=[],s=i("11de"),r=i("3ee7"),l=i("4e15"),o=i("8d15"),d=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"py-2 pl-2 pr-1 overflow-y-hidden"},[t("apollo-query",{staticClass:"\n\t\t\tflex-grow\n\t\t\tmin-h-0\n\t\t\tpx-4\n\t\t\tpy-4\n\t\t\tspace-y-2\n\t\t\toverflow-y-scroll\n\t\t\tbg-white\n\t\t\trounded\n\t\t\tshadow-xs\n\t\t\txl:px-6\n\t\t",attrs:{query:i("2501"),variables:{conversation_id:e.conversationId},update:e.updateQuery},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.result.data;return[t("apollo-subscribe-to-more",{attrs:{document:i("d09e"),variables:e.subscriptionVariables,updateQuery:e.onNewMessage}}),t("apollo-subscribe-to-more",{attrs:{document:i("2501"),variables:{conversation_id:e.conversationId},update:e.updateQuery}}),a?t("div",{staticClass:"w-full py-6 space-y-5 divide-y"},[t("div",{staticClass:"pb-3 space-y-4"},[t("div",{staticClass:"flex flex-wrap items-center py-3 pl-3"},e._l(a.participants.slice(0,8),(function(e){return t("div",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:e.user.full_name,expression:"participant.user.full_name",modifiers:{bottom:!0}}],key:e.user.id,staticClass:"-mt-3 -ml-3"},[t("athlane-profile-image",{staticClass:"shadow-md",attrs:{src:e.user.profile_image,username:e.user.full_name,size:"20"}})],1)})),0),a.campaign?t("div",{staticClass:"grid gap-y-5"},[t("div",{staticClass:"flex flex-col"},[t("span",{staticClass:"flex items-center text-sm text-gray-500"},[e._v(" Campaign ")]),t("p",{staticClass:"text-lg font-medium text-gray-800"},[e._v(" "+e._s(a.campaign.title)+" ")])]),a.activation?t("div",{staticClass:"flex flex-col"},[t("span",{staticClass:"flex items-center text-sm text-gray-500"},[e._v(" Activation Started ")]),t("p",{staticClass:"text-lg font-medium text-gray-800"},[e._v(" "+e._s(e.moment(a.activation.time_created).format("MMMM YYYY"))+" ")])]):e._e()]):e._e()]),a.influencer?t("div",{staticClass:"flex flex-col pt-4 space-y-2 border-t border-gray-200"},[t("p",{staticClass:"flex items-center text-sm text-gray-500"},[e._v("Creator")]),t("div",{staticClass:"flex space-x-3"},[t("athlane-profile-image",{staticClass:"shadow-md",attrs:{src:a.influencer.profile_image_url}}),t("div",{staticClass:"w-full"},[t("div",{staticClass:"flex justify-between w-full"},[t("p",{staticClass:"font-medium text-gray-800"},[e._v(" "+e._s(a.influencer.display_name)+" ")]),a.influencer.streamer_id?t("i",{directives:[{name:"tooltip",rawName:"v-tooltip.top",value:"Open Insights profile",expression:"'Open Insights profile'",modifiers:{top:!0}}],staticClass:"\n\t\t\t\t\t\t\t\t\ttext-indigo-500\n\t\t\t\t\t\t\t\t\tcursor-pointer\n\t\t\t\t\t\t\t\t\tfal\n\t\t\t\t\t\t\t\t\tfa-external-link\n\t\t\t\t\t\t\t\t\thover:text-indigo-700\n\t\t\t\t\t\t\t\t",on:{click:function(n){return e.$open("/insights/"+a.influencer.streamer_id)}}}):e._e()]),t("p",{staticClass:"text-sm text-gray-700"},[e._v(" "+e._s(a.influencer.socials.EMAIL)+" ")]),t("streamer-social-bar",{staticClass:"mt-2 -ml-1",attrs:{streamer:a.influencer,theme:"light",iconStyles:"text-xl"}})],1)],1)]):e._e(),t("div",{staticClass:"flex flex-col py-5 space-y-2 border-t border-gray-200"},[t("p",{staticClass:"text-sm text-gray-500"},[e._v("Actions")]),t("athlane-field",{staticClass:"text-sm",attrs:{maxlength:"140",placeholder:"Search for messages"},on:{input:function(n){return e.$emit("message-search-change",e.messageSearch)}},model:{value:e.messageSearch,callback:function(n){e.messageSearch=n},expression:"messageSearch"}}),a.campaign?t("athlane-button",{attrs:{text:"View Activation"},on:{click:function(n){return e.$router.push("/activations/"+a.activation.id)}}}):e._e(),t("athlane-button",{attrs:{mode:"tertiary",text:"Archive Conversation"},on:{click:e.onClickArchive}}),"brand"==e.$userType&&a.influencer?t("athlane-button",{staticClass:"w-full mt-2",attrs:{icon:"fas fa-handshake",text:"Invite to Campaign"},on:{click:function(n){e.triggerInvite=!0}}}):e._e()],1),t("div",{staticClass:"py-5 space-y-3"},[t("p",{staticClass:"text-sm text-gray-500"},[e._v("Manage Participants")]),t("div",{staticClass:"space-y-1"},[t("p",{staticClass:"font-medium text-gray-800"},[e._v(e._s(e.$user.full_name)+" (You)")]),e._l(a.participants.filter((function(n){return n.user.id!==e.$user.id})),(function(n){return t("div",{key:n.user.id,staticClass:"flex justify-between"},[t("p",{staticClass:"font-medium text-gray-800"},[e._v(" "+e._s(n.user.full_name)+" ")]),t("athlane-button",{staticClass:"-my-3",attrs:{text:"Remove",mode:"text-only"},on:{click:function(i){return e.removeConversationParticipant(n)}}})],1)}))],2)]),t("div",{staticClass:"py-5 space-y-3"},[t("p",{staticClass:"text-sm text-gray-500"},[e._v("Files ("+e._s(a.files.length)+")")]),t("div",{staticClass:"space-y-1"},e._l(a.files,(function(n,i){return t("div",{key:i,staticClass:"\n\t\t\t\t\t\t\ttext-indigo-600\n\t\t\t\t\t\t\ttruncate\n\t\t\t\t\t\t\tcursor-pointer\n\t\t\t\t\t\t\thover:text-indigo-700\n\t\t\t\t\t\t\thover:underline\n\t\t\t\t\t\t"},[t("a",{attrs:{href:n.file_url,target:"_blank"}},[e._v(" "+e._s(n.filename)+" ")])])})),0)])]):e._e(),e.triggerInvite?t("modal",{attrs:{open:e.triggerInvite},on:{close:function(n){e.triggerInvite=!1}}},[e.activationData?e._e():t("pre-activation-selection",{attrs:{streamer:a.influencer},on:{complete:function(n){return e.activationData=n},close:e.onCloseActivationModal}}),e.activationData?t("create-new-activations",e._b({attrs:{influencerId:a.influencer.id,conversationId:e.conversationId},on:{close:e.onCloseActivationModal}},"create-new-activations",e.activationData,!1)):e._e()],1):e._e()]}}])})],1)},c=[],u=i("f3f3"),m=(i("4de4"),i("d28b"),i("d3b7"),i("3ca3"),i("ddb0"),i("a4d3"),i("e01a"),i("99af"),i("d81d"),i("ac1f"),i("1276"),i("f817")),v=i("1280"),f=i("f18b"),k=i("69ef"),p=i("5696"),g=i.n(p),h=i("bd3c"),_=i("afd2"),b=i.n(_),S=i("2501"),y=i.n(S),N=i("64de"),C=i.n(N),w=i("e4a9"),x=i.n(w),I={props:{conversationId:{type:String,required:!1}},components:{Modal:s["a"],PreActivationSelection:v["a"],CreateNewActivations:f["a"],StreamerSocialBar:k["a"]},data:function(){return{messageDraft:null,errorMessage:null,messageSearch:null,triggerInvite:!1,activationData:null,displayContractActivation:!1,platforms:x.a}},computed:{subscriptionVariables:function(){return{conversation_ids:[this.conversationId],query_time:new Date}}},methods:{moment:m["a"],formatSocials:function(e){var n=e.filter((function(e){return e.channel_name})),i={},t=!0,a=!1,s=void 0;try{for(var r,l=n[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){var o=r.value;i[o.channel]="".concat(this.platforms[o.channel].url,"/").concat(o.channel_name)}}catch(d){a=!0,s=d}finally{try{t||null==l.return||l.return()}finally{if(a)throw s}}return i},updateQuery:function(e){var n,i,t=e.conversation[0],a=t.participants.filter((function(e){return e.user.influencer})),s=1===a.length?{id:a[0].user.influencer.id,profile_image_url:a[0].user.profile_image,display_name:a[0].user.influencer.alias,streamer_id:a[0].user.influencer.streamer_id,socials:Object(u["a"])(Object(u["a"])({},this.formatSocials(a[0].user.influencer.socials)),{},{EMAIL:a[0].user.email})}:null;return Object(u["a"])(Object(u["a"])({},t),{},{files:t.files.map((function(e){return{file_url:e.file_url,filename:e.text.split(" ")[0]}})),title:Object(h["e"])(t.title),activation:null===(n=t.references[0])||void 0===n?void 0:n.activation,campaign:null===(i=t.references[0])||void 0===i?void 0:i.campaign,influencer:s})},onNewMessage:function(e,n){var i,t=n.subscriptionData;if(e&&null!==t&&void 0!==t&&null!==(i=t.data)&&void 0!==i&&i.file.length)return e.conversation[0].files.push(t.data.file[0]),e},onClickArchive:function(){var e=g.a,n={id:this.conversationId,changes:{status:"ARCHIVED"}};this.$apollo.mutate({mutation:e,variables:n,update:function(e,n){var i=n.data.update_conversation,t=i.returning;if(t.length){var a=t[0].id,s={query:b.a,variables:{search_query:null,numPerPage:20,campaign_id:null}},r=e.readQuery(s);r.conversations=r.conversations.filter((function(e){return e.id!==a})),e.writeQuery(Object(u["a"])(Object(u["a"])({},s),{},{data:r}))}}}),this.$router.push("/messages")},removeConversationParticipant:function(e){var n=C.a,i={conversation_id:this.conversationId,user_id:e.user.id};this.$apollo.mutate({mutation:n,variables:i,update:function(n){var i=n.readQuery({query:y.a,variables:{conversation_id:this.conversationId}});i.conversation[0].participants=i.conversation[0].participants.filter((function(n){return n.user.id!=e.user.id})),n.writeQuery({query:y.a,variables:{conversation_id:this.conversationId}})}})},onCloseActivationModal:function(){this.triggerInvite=!1,this.activationData=null}}},F=I,O=i("2877"),V=Object(O["a"])(F,d,c,!1,null,null,null),j=V.exports,D={props:{conversationId:{type:String,required:!1}},data:function(){return{conversation:null,messageSearch:"",showCreateModal:!1}},created:function(){this.$data.showCreateModal=!!this.$route.query.create},computed:{enableNewMessage:function(){return!this.$user.influencer}},components:{Modal:s["a"],CreateNewConversation:r["a"],ConversationMessages:l["default"],ConversationList:o["a"],ConversationSidebarRight:j},methods:{onMessageSearchChange:function(e){this.messageSearch=e}}},E=D,$=(i("8644"),Object(O["a"])(E,t,a,!1,null,"0a4734f2",null));n["default"]=$.exports}}]);
//# sourceMappingURL=chunk-196df552.faadbc47.js.map