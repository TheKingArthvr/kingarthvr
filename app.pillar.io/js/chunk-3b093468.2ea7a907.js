(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b093468"],{"1dce":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vuelidate=N,Object.defineProperty(t,"withParams",{enumerable:!0,get:function(){return i.withParams}}),t.default=t.validationMixin=void 0;var r=n("fbf4"),i=n("0234");function a(e){return u(e)||o(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function u(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var m=function(){return null},f=function(e,t,n){return e.reduce((function(e,r){return e[n?n(r):r]=t(r),e}),{})};function v(e){return"function"===typeof e}function h(e){return null!==e&&("object"===c(e)||v(e))}function p(e){return h(e)&&v(e.then)}var b=function(e,t,n,r){if("function"===typeof n)return n.call(e,t,r);n=Array.isArray(n)?n:n.split(".");for(var i=0;i<n.length;i++){if(!t||"object"!==c(t))return r;t=t[n[i]]}return"undefined"===typeof t?r:t},_="__isVuelidateAsyncVm";function y(e,t){var n=new e({data:{p:!0,v:!1}});return t.then((function(e){n.p=!1,n.v=e}),(function(e){throw n.p=!1,n.v=!1,e})),n[_]=!0,n}var g={$invalid:function(){var e=this,t=this.proxy;return this.nestedKeys.some((function(t){return e.refProxy(t).$invalid}))||this.ruleKeys.some((function(e){return!t[e]}))},$dirty:function(){var e=this;return!!this.dirty||0!==this.nestedKeys.length&&this.nestedKeys.every((function(t){return e.refProxy(t).$dirty}))},$anyDirty:function(){var e=this;return!!this.dirty||0!==this.nestedKeys.length&&this.nestedKeys.some((function(t){return e.refProxy(t).$anyDirty}))},$error:function(){return this.$dirty&&!this.$pending&&this.$invalid},$anyError:function(){var e=this;return!!this.$error||this.nestedKeys.some((function(t){return e.refProxy(t).$anyError}))},$pending:function(){var e=this;return this.ruleKeys.some((function(t){return e.getRef(t).$pending}))||this.nestedKeys.some((function(t){return e.refProxy(t).$pending}))},$params:function(){var e=this,t=this.validations;return l({},f(this.nestedKeys,(function(e){return t[e]&&t[e].$params||null})),f(this.ruleKeys,(function(t){return e.getRef(t).$params})))}};function $(e){this.dirty=e;var t=this.proxy,n=e?"$touch":"$reset";this.nestedKeys.forEach((function(e){t[e][n]()}))}var k={$touch:function(){$.call(this,!0)},$reset:function(){$.call(this,!1)},$flattenParams:function(){var e=this.proxy,t=[];for(var n in this.$params)if(this.isNested(n)){for(var r=e[n].$flattenParams(),i=0;i<r.length;i++)r[i].path.unshift(n);t=t.concat(r)}else t.push({path:[],name:n,params:this.$params[n]});return t}},x=Object.keys(g),M=Object.keys(k),w=null,O=function(e){if(w)return w;var t=e.extend({computed:{refs:function(){var e=this._vval;this._vval=this.children,(0,r.patchChildren)(e,this._vval);var t={};return this._vval.forEach((function(e){t[e.key]=e.vm})),t}},beforeCreate:function(){this._vval=null},beforeDestroy:function(){this._vval&&((0,r.patchChildren)(this._vval),this._vval=null)},methods:{getModel:function(){return this.lazyModel?this.lazyModel(this.prop):this.model},getModelKey:function(e){var t=this.getModel();if(t)return t[e]},hasIter:function(){return!1}}}),n=t.extend({data:function(){return{rule:null,lazyModel:null,model:null,lazyParentModel:null,rootModel:null}},methods:{runRule:function(t){var n=this.getModel();(0,i.pushParams)();var r=this.rule.call(this.rootModel,n,t),a=p(r)?y(e,r):r,s=(0,i.popParams)(),o=s&&s.$sub?s.$sub.length>1?s:s.$sub[0]:null;return{output:a,params:o}}},computed:{run:function(){var e=this,t=this.lazyParentModel(),n=Array.isArray(t)&&t.__ob__;if(n){var r=t.__ob__.dep;r.depend();var i=r.constructor.target;if(!this._indirectWatcher){var a=i.constructor;this._indirectWatcher=new a(this,(function(){return e.runRule(t)}),null,{lazy:!0})}var s=this.getModel();if(!this._indirectWatcher.dirty&&this._lastModel===s)return this._indirectWatcher.depend(),i.value;this._lastModel=s,this._indirectWatcher.evaluate(),this._indirectWatcher.depend()}else this._indirectWatcher&&(this._indirectWatcher.teardown(),this._indirectWatcher=null);return this._indirectWatcher?this._indirectWatcher.value:this.runRule(t)},$params:function(){return this.run.params},proxy:function(){var e=this.run.output;return e[_]?!!e.v:!!e},$pending:function(){var e=this.run.output;return!!e[_]&&e.p}},destroyed:function(){this._indirectWatcher&&(this._indirectWatcher.teardown(),this._indirectWatcher=null)}}),s=t.extend({data:function(){return{dirty:!1,validations:null,lazyModel:null,model:null,prop:null,lazyParentModel:null,rootModel:null}},methods:l({},k,{refProxy:function(e){return this.getRef(e).proxy},getRef:function(e){return this.refs[e]},isNested:function(e){return"function"!==typeof this.validations[e]}}),computed:l({},g,{nestedKeys:function(){return this.keys.filter(this.isNested)},ruleKeys:function(){var e=this;return this.keys.filter((function(t){return!e.isNested(t)}))},keys:function(){return Object.keys(this.validations).filter((function(e){return"$params"!==e}))},proxy:function(){var e=this,t=f(this.keys,(function(t){return{enumerable:!0,configurable:!0,get:function(){return e.refProxy(t)}}})),n=f(x,(function(t){return{enumerable:!0,configurable:!0,get:function(){return e[t]}}})),r=f(M,(function(t){return{enumerable:!1,configurable:!0,get:function(){return e[t]}}})),i=this.hasIter()?{$iter:{enumerable:!0,value:Object.defineProperties({},l({},t))}}:{};return Object.defineProperties({},l({},t,i,{$model:{enumerable:!0,get:function(){var t=e.lazyParentModel();return null!=t?t[e.prop]:null},set:function(t){var n=e.lazyParentModel();null!=n&&(n[e.prop]=t,e.$touch())}}},n,r))},children:function(){var e=this;return a(this.nestedKeys.map((function(t){return d(e,t)}))).concat(a(this.ruleKeys.map((function(t){return c(e,t)})))).filter(Boolean)}})}),o=s.extend({methods:{isNested:function(e){return"undefined"!==typeof this.validations[e]()},getRef:function(e){var t=this;return{get proxy(){return t.validations[e]()||!1}}}}}),u=s.extend({computed:{keys:function(){var e=this.getModel();return h(e)?Object.keys(e):[]},tracker:function(){var e=this,t=this.validations.$trackBy;return t?function(n){return"".concat(b(e.rootModel,e.getModelKey(n),t))}:function(e){return"".concat(e)}},getModelLazy:function(){var e=this;return function(){return e.getModel()}},children:function(){var e=this,t=this.validations,n=this.getModel(),i=l({},t);delete i["$trackBy"];var a={};return this.keys.map((function(t){var o=e.tracker(t);return a.hasOwnProperty(o)?null:(a[o]=!0,(0,r.h)(s,o,{validations:i,prop:t,lazyParentModel:e.getModelLazy,model:n[t],rootModel:e.rootModel}))})).filter(Boolean)}},methods:{isNested:function(){return!0},getRef:function(e){return this.refs[this.tracker(e)]},hasIter:function(){return!0}}}),d=function(e,t){if("$each"===t)return(0,r.h)(u,t,{validations:e.validations[t],lazyParentModel:e.lazyParentModel,prop:t,lazyModel:e.getModel,rootModel:e.rootModel});var n=e.validations[t];if(Array.isArray(n)){var i=e.rootModel,a=f(n,(function(e){return function(){return b(i,i.$v,e)}}),(function(e){return Array.isArray(e)?e.join("."):e}));return(0,r.h)(o,t,{validations:a,lazyParentModel:m,prop:t,lazyModel:m,rootModel:i})}return(0,r.h)(s,t,{validations:n,lazyParentModel:e.getModel,prop:t,lazyModel:e.getModelKey,rootModel:e.rootModel})},c=function(e,t){return(0,r.h)(n,t,{rule:e.validations[t],lazyParentModel:e.lazyParentModel,lazyModel:e.getModel,rootModel:e.rootModel})};return w={VBase:t,Validation:s},w},j=null;function C(e){if(j)return j;var t=e.constructor;while(t.super)t=t.super;return j=t,t}var S=function(e,t){var n=C(e),i=O(n),a=i.Validation,s=i.VBase,o=new s({computed:{children:function(){var n="function"===typeof t?t.call(e):t;return[(0,r.h)(a,"$v",{validations:n,lazyParentModel:m,prop:"$v",model:e,rootModel:e})]}}});return o},z={data:function(){var e=this.$options.validations;return e&&(this._vuelidate=S(this,e)),{}},beforeCreate:function(){var e=this.$options,t=e.validations;t&&(e.computed||(e.computed={}),e.computed.$v||(e.computed.$v=function(){return this._vuelidate?this._vuelidate.refs.$v.proxy:null}))},beforeDestroy:function(){this._vuelidate&&(this._vuelidate.$destroy(),this._vuelidate=null)}};function N(e){e.mixin(z)}t.validationMixin=z;var P=N;t.default=P},"82ff":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"flex flex-row items-center mx-1 my-2 leading-tight cursor-pointer select-none"},[n("input",e._b({staticClass:"form-checkbox cursor-pointer",class:{error:e.$props.error,dark:e.$props.dark},attrs:{type:"checkbox"},domProps:{checked:e.checked},on:{change:function(t){return e.$emit("change",t.target.checked)}}},"input",e.$attrs,!1)),n("div",{staticClass:"flex flex-col pl-4"},[n("p",{staticClass:"block text-sm font-medium",class:{"text-gray-700":!e.$props.dark,"text-gray-200":e.$props.dark}},[e._v(" "+e._s(e.label)+" "),e._t("default")],2),e.subtext?n("p",{staticClass:"mt-1 text-xs text-gray-500"},[e._v(e._s(e.subtext))]):e._e(),!e.hideError&&e.$props.error?n("p",{staticClass:"text-sm text-red-500"},[e._v(" "+e._s(e.errorMessage)+" ")]):e._e()])])},i=[],a=n("2b0e"),s=a["default"].extend({inheritAttrs:!1,model:{prop:"checked",event:"change"},props:{dark:{type:Boolean,default:!1},error:{required:!1},hideError:{type:Boolean,default:!1},label:{type:String,required:!1},subtext:{type:String,required:!1},checked:{type:Boolean,required:!0,default:!1}},computed:{errorMessage:function(){var e;return null!==(e=this.$props.error)&&void 0!==e?e:"Error: "}}}),o=s,u=(n("dd65"),n("2877")),l=Object(u["a"])(o,r,i,!1,null,null,null);t["a"]=l.exports},"84d2":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RemoveOrganizationMember"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"organization_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"uuid"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"uuid"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"delete_users_org_members"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"org_id"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"organization_id"}}}]}},{kind:"ObjectField",name:{kind:"Name",value:"user_id"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"affected_rows"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"returning"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"org_id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"delete_users_org_invitation"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"org_id"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"organization_id"}}}]}},{kind:"ObjectField",name:{kind:"Name",value:"user_id"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"returning"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"org_id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"affected_rows"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:447}};n.loc.source={body:"mutation RemoveOrganizationMember($organization_id: uuid!, $user_id: uuid!) {\n  delete_users_org_members(\n    where: { org_id: { _eq: $organization_id }, user_id: { _eq: $user_id } }\n  ) {\n    affected_rows\n    returning {\n      user_id\n      org_id\n    }\n  }\n  delete_users_org_invitation(\n    where: { org_id: { _eq: $organization_id }, user_id: { _eq: $user_id } }\n  ) {\n    returning {\n      user_id\n      org_id\n    }\n    affected_rows\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function r(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){r(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){r(e,t)})),e.definitions&&e.definitions.forEach((function(e){r(e,t)}))}var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var r=e.definitions[n];if(r.name&&r.name.value==t)return r}}function s(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,s=new Set,o=new Set;r.forEach((function(e){o.add(e)}));while(o.size>0){var u=o;o=new Set,u.forEach((function(e){if(!s.has(e)){s.add(e);var t=i[e]||new Set;t.forEach((function(e){o.add(e)}))}}))}return s.forEach((function(t){var r=a(e,t);r&&n.definitions.push(r)})),n}(function(){n.definitions.forEach((function(e){if(e.name){var t=new Set;r(e,t),i[e.name.value]=t}}))})(),e.exports=n,e.exports["RemoveOrganizationMember"]=s(n,"RemoveOrganizationMember")},a8ed:function(e,t,n){"use strict";n.r(t);var r,i,a,s,o,u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex flex-col"},[n("FormSection",{attrs:{title:"Members",subtext:"You can add your members, edit their info, edit their permissions, or remove them from the list completely."}},[n("div",{staticClass:"grid gap-4 grid-col-1 sm:grid-cols-3"},e._l(e.members,(function(t,r){return n("MemberCard",{key:r,attrs:{member:t},on:{edit:e.onEditMember}})})),1)]),n("div",{staticClass:"flex items-center justify-end"},[n("athlane-button",{attrs:{text:"Add Member",icon:"fal fa-plus"},on:{click:function(t){e.showModal=!0}}})],1),e.showModal?n("Modal",{attrs:{open:e.showModal},on:{close:function(t){return e.reset()}}},[n("CreateUpdateDeleteMember",{attrs:{member:e.crudMember,loading:e.$apollo.loading},on:{success:e.onSaveMember,remove:e.onRemoveMember,close:function(t){return e.reset()}}})],1):e._e()],1)},l=[],d=n("f3f3"),c=n("c964"),m=n("e5e9"),f=(n("96cf"),n("b0c0"),n("d81d"),n("4de4"),n("5184")),v=n("2ef0"),h=n("2b0e"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex flex-col p-6 bg-white rounded-lg shadow-xl overflow-none"},[n("form",{on:{submit:function(t){return t.preventDefault(),e.onSave.apply(null,arguments)}}},[n("div",{staticClass:"flex items-center justify-between mb-4"},[n("h1",{staticClass:"text-xl text-gray-900"},[e._v(e._s(e.title))]),e.invitationUrl?n("athlane-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.invitationUrl,expression:"invitationUrl",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:function(){return e.isCopied=!0},expression:"() => (isCopied = true)",arg:"success"}],attrs:{text:e.isCopied?"Copied":"Copy Invitation",icon:{"fas fa-envelope":!e.isCopied,"fas fa-check-circle":e.isCopied},mode:"tertiary",type:"button"}}):e._e()],1),n("div",{staticClass:"flex flex-col space-y-2",attrs:{id:"infoFields"}},[n("div",{staticClass:"flex items-center space-x-2"},[n("Field",{attrs:{error:e.$error.member.user.first_name.$message,label:"First Name",icon:"fas fa-user",required:"",flat:""},model:{value:e.$v.member.user.first_name.$model,callback:function(t){e.$set(e.$v.member.user.first_name,"$model","string"===typeof t?t.trim():t)},expression:"$v.member.user.first_name.$model"}}),n("Field",{attrs:{error:e.$error.member.user.last_name.$message,label:"Last Name",icon:"fas fa-user",required:"",flat:""},model:{value:e.$v.member.user.last_name.$model,callback:function(t){e.$set(e.$v.member.user.last_name,"$model","string"===typeof t?t.trim():t)},expression:"$v.member.user.last_name.$model"}})],1),n("Field",{staticClass:"col-span-2",attrs:{error:e.$error.member.user.email.$message,label:"Email",icon:"fas fa-envelope",type:"email",required:"",flat:""},model:{value:e.$v.member.user.email.$model,callback:function(t){e.$set(e.$v.member.user.email,"$model","string"===typeof t?t.trim():t)},expression:"$v.member.user.email.$model"}})],1),n("h1",{staticClass:"mt-6 mb-2 text-xl text-gray-900"},[e._v("Permissions")]),n("div",{staticClass:"flex flex-col",attrs:{id:"permissionOptions"}},[n("Checkbox",{attrs:{error:e.$error.member.admin.$message,label:"Administrator",subtext:"User is a brand administrator.",hideError:""},model:{value:e.$v.member.admin.$model,callback:function(t){e.$set(e.$v.member.admin,"$model",t)},expression:"$v.member.admin.$model"}})],1),n("div",{staticClass:"flex flex-row items-center mt-6",class:{"justify-between":e.$props.member.user.id,"justify-end":!e.$props.member.user.id},attrs:{id:"buttons"}},[e.$props.member.user.id?n("div",{staticClass:"flex items-center"},[e.isRemoving?n("div",{staticClass:"flex items-center justify-between"},[e._v(" Are you sure? "),n("div",{staticClass:"flex items-center ml-4"},[n("athlane-button",{attrs:{icon:"fas fa-check",text:"Yes",mode:"warning",type:"button"},on:{click:function(t){return e.$emit("remove")}}}),n("athlane-button",{staticClass:"ml-2",attrs:{text:"No",mode:"tertiary",icon:"fas fa-times",type:"button"},on:{click:function(t){e.isRemoving=!1}}})],1)]):n("athlane-button",{attrs:{mode:"warning",type:"button",icon:"fas fa-times",text:"Remove Member"},on:{click:function(t){e.isRemoving=!0}}})],1):e._e(),e.isRemoving?e._e():n("div",{staticClass:"flex items-center space-x-2"},[n("athlane-button",{attrs:{mode:"tertiary",text:"Cancel",type:"button",id:"cancelButton"},on:{click:function(t){return e.$emit("close")}}}),n("athlane-button",{attrs:{text:"Save",icon:{"fas fa-spin fa-spinner":e.loading,"fas fa-check":!e.loading},disabled:e.disableSubmit,type:"submit"}})],1)])])])},b=[],_=(n("99af"),n("1dce")),y=n("b5aed"),g=n("82ff"),$=n("4250"),k=n("68de"),x=h["default"].extend({mixins:[_["validationMixin"]],components:{Checkbox:g["a"],Field:$["a"]},props:{loading:{type:Boolean,required:!0,default:!1},member:{type:Object,required:!0}},data:function(){return{isRemoving:!1,isCopied:!1}},computed:{invitationUrl:function(){var e;if(!this.$props.member.user.registered&&null!==(e=this.$props.member.user.org_invitations)&&void 0!==e&&e.length)return"".concat(window.location.origin,"/invitation/").concat(this.$props.member.user.org_invitations[0].id)},disableSubmit:function(){return this.loading||this.$v.$invalid},isAdding:function(){var e,t;return!(null!==(e=this.$props.member)&&void 0!==e&&null!==(t=e.user)&&void 0!==t&&t.id)},title:function(){return this.isAdding?"Add Member":"Edit Member"},$error:function(){var e={member:{admin:{},user:{first_name:{required:"Please enter member's first name.",alpha:"Please enter only letters."},last_name:{required:"Please enter member's last name.",alpha:"Please enter only letters."},email:{required:"Please provide  e-mail address.",email:"Please enter valid email address."}}}};return Object(k["a"])(e,this.$v),e}},validations:function(){return{member:{admin:{},user:{id:{alpha:k["e"]},first_name:{required:y["required"],alpha:k["b"]},last_name:{required:y["required"],alpha:k["b"]},email:{required:y["required"],email:y["email"]}}}}},methods:{onSave:function(){this.$v.member.$touch(),this.$v.$invalid||(this.$emit("success"),this.$v.$reset())}}}),M=x,w=n("2877"),O=Object(w["a"])(M,p,b,!1,null,null,null),j=O.exports,C=n("eef1"),S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"\n\t\tflex flex-col\n\t\titems-center\n\t\tjustify-center\n\t\th-48\n\t\tmax-w-full\n\t\tpx-2\n\t\tpy-4\n\t\ttext-center\n\t\tbg-white\n\t\trounded-lg\n\t\tshadow-xs\n\t\tcursor-pointer\n\t\tselect-none\n\t\thover:ring\n\t\tring-indigo-500\n\t\thover:shadow-md\n\t",on:{click:function(t){return e.$emit("edit",e.member)}}},[n("athlane-profile-image",{attrs:{src:e.member.user.profile_image,username:`${e.member.user.first_name} ${e.member.user.last_name}`,size:"16"}}),n("h1",{staticClass:"mt-2 text-base font-medium text-gray-900"},[e._v(" "+e._s(e.member.user.first_name)+" ")]),n("p",{staticClass:"max-w-full text-xs leading-tight text-gray-600 truncate"},[e._v(" "+e._s(e.member.user.email)+" ")]),e.member.user.registered?n("div",{staticClass:"flex items-center mt-2 text-xs text-gray-500"},[n("i",{staticClass:"mr-2 text-green-500 fas fa-check-circle"}),e._v(" Registered ")]):n("div",{staticClass:"flex items-center mt-2 text-xs text-gray-500"},[n("i",{staticClass:"mr-2 text-orange-500 fas fa-ellipsis-h"}),e._v(" Pending ")])],1)},z=[],N=h["default"].extend({props:{member:{type:Object,required:!0}}}),P=N,q=Object(w["a"])(P,S,z,!1,null,null,null),E=q.exports,F=n("11de"),R=n("84d2"),A=n.n(R),V=Object(f["a"])(r||(r=Object(m["a"])(["\n\tquery GetUserByEmail($email: String!) {\n\t\tuser: users_user(where: { email: { _eq: $email } }) {\n\t\t\tid\n\t\t\tfirst_name\n\t\t\tlast_name\n\t\t\temail\n\t\t\tprofile_image\n\t\t\tregistered\n\t\t}\n\t}\n"]))),K=Object(f["a"])(i||(i=Object(m["a"])(["\n\tquery GetOrganizationMembers($org_id: uuid!) {\n\t\tmembers: users_org_members(\n\t\t\twhere: { org_id: { _eq: $org_id } }\n\t\t\torder_by: { user: { registered: desc, first_name: asc } }\n\t\t) {\n\t\t\tadmin\n\t\t\torganization {\n\t\t\t\tid\n\t\t\t\tname\n\t\t\t}\n\t\t\tuser {\n\t\t\t\tid\n\t\t\t\tfirst_name\n\t\t\t\tlast_name\n\t\t\t\temail\n\t\t\t\tprofile_image\n\t\t\t\tregistered\n\t\t\t}\n\t\t}\n\t}\n"]))),D=Object(f["a"])(a||(a=Object(m["a"])(["\n\tmutation InsertOrgInvitation(\n\t\t$invitation: users_org_invitation_insert_input!\n\t) {\n\t\tinvitation: insert_users_org_invitation(objects: [$invitation]) {\n\t\t\treturning {\n\t\t\t\tuser {\n\t\t\t\t\tid\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]))),W=Object(f["a"])(s||(s=Object(m["a"])(["\n\tmutation InsertOrgMembership($membership: users_org_members_insert_input!) {\n\t\tmembership: insert_users_org_members(objects: [$membership]) {\n\t\t\taffected_rows\n\t\t}\n\t}\n"]))),B=Object(f["a"])(o||(o=Object(m["a"])(["\n\tmutation UpdateOrganizationMember(\n\t\t$user_id: uuid!\n\t\t$org_id: uuid!\n\t\t$member_changes: users_org_members_set_input!\n\t\t$user_changes: users_user_set_input!\n\t) {\n\t\tupdate_users_org_members(\n\t\t\twhere: { user_id: { _eq: $user_id }, org_id: { _eq: $org_id } }\n\t\t\t_set: $member_changes\n\t\t) {\n\t\t\taffected_rows\n\t\t}\n\t\tupdate_users_user(where: { id: { _eq: $user_id } }, _set: $user_changes) {\n\t\t\taffected_rows\n\t\t}\n\t}\n"]))),Q=h["default"].extend({components:{CreateUpdateDeleteMember:j,FormSection:C["a"],MemberCard:E,Modal:F["a"]},data:function(){return{showModal:!1,members:[],crudMember:{admin:!1,user:{first_name:null,last_name:null,email:null}}}},methods:{primaryAction:function(){this.resetCrudMember(),this.onEditMember()},onEditMember:function(e){this.$data.showModal=!0,e&&(this.$data.crudMember=Object(v["cloneDeep"])(e))},resetCrudMember:function(){this.$data.crudMember={admin:!1,user:{first_name:null,last_name:null,email:null}}},onSaveMember:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a,s,o,u,l,c,m,f,v,h,p,b,_,y,g,$,k,x,M,w;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$data.crudMember,n=t.admin,r=t.user,i=r.first_name,a=r.last_name,s=r.id,o=r.email.toLowerCase(),u=this.$organization.id,l=this.$organization.name,c=this.$organization,m={query:K,variables:{org_id:u}},f=this.$data.members.some((function(e){return e.user.id==s})),!f){e.next=14;break}return v={user_id:s,org_id:u,member_changes:{admin:n},user_changes:{first_name:i,last_name:a,email:o}},e.next=12,this.$apollo.mutate({mutation:B,variables:v,update:function(e,t){var r=e.readQuery(m);r.members=r.members.map((function(e){return e.user.id!==s?e:Object(d["a"])(Object(d["a"])({},e),{},{admin:n,user:Object(d["a"])(Object(d["a"])({},e.user),{},{first_name:i,last_name:a,email:o})})})),e.writeQuery(Object(d["a"])(Object(d["a"])({},m),{},{data:r}))}});case 12:e.next=28;break;case 14:return e.next=16,this.$apollo.query({query:V,variables:{email:o}});case 16:if(p=e.sent,b=p.data,null===(h=b.user)||void 0===h||!h.length){e.next=24;break}return _=b.user[0],e.next=22,this.$apollo.mutate({mutation:W,variables:{membership:{user_id:_.id,org_id:u,admin:n}},update:function(e,t){var r=e.readQuery(m),i={__typename:"users_org_members",admin:n,organization:c,user:Object(d["a"])({},_)};r.members.push(i),e.writeQuery(Object(d["a"])(Object(d["a"])({},m),{},{data:r}))}});case 22:e.next=28;break;case 24:return y=this.$data.crudMember,g=y.admin,$=y.user,k=$.first_name,x=$.last_name,M=$.email,w={invitation:{admin:g,email:M,first_name:k,last_name:x,org_id:u,org_name:l,user:{data:{email:M,first_name:k,last_name:x,memberships:{data:[{admin:g,org_id:u}]}}}}},e.next=28,this.$apollo.mutate({mutation:D,variables:w,update:function(e,t){var n=t.data.invitation,r=n.returning[0].user.id,i=e.readQuery(m),a={__typename:"users_org_members",admin:g,organization:c,user:{__typename:"users_user",id:r,first_name:k,last_name:x,email:M,profile_image:null,registered:!1}};i.members.push(a),e.writeQuery(Object(d["a"])(Object(d["a"])({},m),{},{data:i}))}});case 28:this.$notify({type:"success",title:"Success",text:"Changes saved."}),this.reset();case 30:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onRemoveMember:function(){var e=this.$data.crudMember.user;if(e&&e.id){var t={query:K,variables:{org_id:this.$organization.id}};try{this.$apollo.mutate({mutation:A.a,variables:{organization_id:this.$organization.id,user_id:e.id},update:function(n,r){var i=r.data.delete_users_org_members;if(i.affected_rows){var a=n.readQuery(t);a.members=a.members.filter((function(t){return t.user.id!==e.id})),n.writeQuery(Object(d["a"])(Object(d["a"])({},t),{},{data:a}))}}}),this.$notify({type:"success",title:"Removed Member",text:"Successfully removed the member."}),this.reset()}catch(n){this.$notify({type:"error",title:"Server Error",text:"There was an error while removing the member."}),console.error(n)}}},reset:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.resetCrudMember(),this.$data.showModal=!1;case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},apollo:{members:{query:K,variables:function(){return{org_id:this.$organization.id}},skip:function(){var e;return!(null!==(e=this.$organization)&&void 0!==e&&e.id)}}}}),U=Q,I=Object(w["a"])(U,u,l,!1,null,null,null);t["default"]=I.exports},c5e8:function(e,t,n){},dd65:function(e,t,n){"use strict";n("c5e8")},eef1:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex flex-col my-4 space-y-4"},[n("div",{staticClass:"flex flex-col space-y-2"},[n("div",{staticClass:"text-lg",class:{"text-gray-800":!e.$props.dark,"text-gray-100":e.$props.dark}},[e._v(" "+e._s(e.title)+" ")]),n("div",{class:{"text-gray-500":!e.$props.dark,"text-gray-300":e.$props.dark}},[e._v(" "+e._s(e.subtext)+" "),e._t("subtext")],2)]),n("div",{staticClass:"flex flex-col space-y-3"},[e._t("default")],2)])},i=[],a=n("2b0e"),s=a["default"].extend({props:{title:{type:String,required:!1},subtext:{type:String,required:!1},dark:{type:Boolean,default:!1}}}),o=s,u=n("2877"),l=Object(u["a"])(o,r,i,!1,null,null,null);t["a"]=l.exports},fbf4:function(e,t,n){"use strict";function r(e){return null===e||void 0===e}function i(e){return null!==e&&void 0!==e}function a(e,t){return t.tag===e.tag&&t.key===e.key}function s(e){var t=e.tag;e.vm=new t({data:e.args})}function o(e){for(var t=Object.keys(e.args),n=0;n<t.length;n++)t.forEach((function(t){e.vm[t]=e.args[t]}))}function u(e,t,n){var r,a,s={};for(r=t;r<=n;++r)a=e[r].key,i(a)&&(s[a]=r);return s}function l(e,t){var n,o,l,f=0,v=0,h=e.length-1,p=e[0],b=e[h],_=t.length-1,y=t[0],g=t[_];while(f<=h&&v<=_)r(p)?p=e[++f]:r(b)?b=e[--h]:a(p,y)?(m(p,y),p=e[++f],y=t[++v]):a(b,g)?(m(b,g),b=e[--h],g=t[--_]):a(p,g)?(m(p,g),p=e[++f],g=t[--_]):a(b,y)?(m(b,y),b=e[--h],y=t[++v]):(r(n)&&(n=u(e,f,h)),o=i(y.key)?n[y.key]:null,r(o)?(s(y),y=t[++v]):(l=e[o],a(l,y)?(m(l,y),e[o]=void 0,y=t[++v]):(s(y),y=t[++v])));f>h?d(t,v,_):v>_&&c(e,f,h)}function d(e,t,n){for(;t<=n;++t)s(e[t])}function c(e,t,n){for(;t<=n;++t){var r=e[t];i(r)&&(r.vm.$destroy(),r.vm=null)}}function m(e,t){e!==t&&(t.vm=e.vm,o(t))}function f(e,t){i(e)&&i(t)?e!==t&&l(e,t):i(t)?d(t,0,t.length-1):i(e)&&c(e,0,e.length-1)}function v(e,t,n){return{tag:e,key:t,args:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.patchChildren=f,t.h=v}}]);
//# sourceMappingURL=chunk-3b093468.2ea7a907.js.map