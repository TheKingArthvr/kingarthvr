(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e509a"],{"937a":function(t,e,a){"use strict";a.r(e);var s,n,o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex flex-col"},[t.$apollo.loading?t._e():a("athlane-page-header",{attrs:{title:"Commissions",text:"View or manage brand deal commissions",ctaIcon:t.loading?"fas fa-spinner fa-spin":"fas fa-download",ctaText:t.cashOutText,showCta:t.payableCommissions.USD>10},on:{"action-click":t.cashOut}}),a("div",{staticClass:"flex flex-col py-5"},[t.isLoading||t.$apollo.loading?a("loader",{attrs:{color:"#4c8bf5"}}):t.commissions.length?a("div",{staticClass:"flex flex-col space-y-4"},[a("div",{staticClass:"flex flex-col mt-4"},[a("div",{staticClass:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},[a("div",{staticClass:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8"},[a("div",{staticClass:"overflow-hidden border-b border-gray-200 shadow sm:rounded-lg"},[a("table",{staticClass:"min-w-full divide-y divide-gray-200"},[a("thead",{staticClass:"bg-gray-50"},[a("tr",[a("th",{staticClass:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",attrs:{scope:"col"}},[t._v(" Brand ")]),a("th",{staticClass:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",attrs:{scope:"col"}},[t._v(" Commission ")]),a("th",{staticClass:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",attrs:{scope:"col"}},[t._v(" Payout Eligible Date ")]),a("th",{staticClass:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",attrs:{scope:"col"}},[t._v(" Status ")]),a("th",{staticClass:"px-6 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",attrs:{scope:"col"}},[t._v(" Sales Date ")])])]),a("tbody",{staticClass:"bg-white divide-y divide-gray-200"},t._l(t.commissions,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"px-6 py-4 text-sm font-medium text-gray-900 whitespace-nowrap"},[t._v(" "+t._s(e.advertiser.name)+" ")]),a("td",{staticClass:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap"},[t._v(" $"+t._s(parseFloat(e.amount).toFixed(2))+" ")]),a("td",{staticClass:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap"},[t._v(" "+t._s(t.dateFormatter(e.payout_ready_date))+" ")]),a("td",{staticClass:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap"},[t._v(" "+t._s(t.statusForCommission(e))+" ")]),a("td",{staticClass:"px-6 py-4 text-sm text-gray-500 whitespace-nowrap"},[t._v(" "+t._s(t.dateFormatter(e.sales_date))+" ")])])})),0)])])])])])]):a("empty-bookshelf",{attrs:{message:"You don't have commissions to show at the moment. Share more brand deals links to earn commissions."}})],1)],1)},i=[],r=a("f3f3"),c=a("c964"),l=a("e5e9"),d=(a("96cf"),a("b6802"),a("d81d"),a("5184")),m=a("b104"),u=a("8a5d"),p=a("c678"),x=a("2ef0"),y=a("c1df"),f=a.n(y),_=Object(d["a"])(s||(s=Object(l["a"])(["\n\tquery GetCommission {\n\t\tnetwork_commission {\n\t\t\tid\n\t\t\tcommission_amount\n\t\t\tpayout_ready_date\n\t\t\tinvalid_reason\n\t\t\tstatus\n\t\t\tsales_date\n\t\t\tadvertiser {\n\t\t\t\tid\n\t\t\t\tname\n\t\t\t}\n\t\t\tupdated_at\n\t\t}\n\t}\n"]))),v=Object(d["a"])(n||(n=Object(l["a"])(["\n\tquery PayableCommission($date: date) {\n\t\tnetwork_commission(\n\t\t\twhere: { status: { _is_null: true }, payout_ready_date: { _lt: $date } }\n\t\t) {\n\t\t\tid\n\t\t\tcommission_amount\n\t\t\tpayout_ready_date\n\t\t\tinvalid_reason\n\t\t\tstatus\n\t\t\tadvertiser {\n\t\t\t\tid\n\t\t\t\tname\n\t\t\t}\n\t\t\tupdated_at\n\t\t}\n\t}\n"]))),g={components:{Loader:u["a"],EmptyBookshelf:p["a"]},data:function(){return{hidden:!1,isLoading:!1,commissions:[],loading:!1,payableCommissions:{USD:0}}},computed:{cashOutText:function(){var t=this.payableCommissions;return"Cash Out $".concat(parseFloat(t["USD"]).toFixed(2))}},methods:{dateFormatter:m["e"],numericToDollarString:m["D"],cashOut:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,a=t.$user.influencer.id,e.prev=2,e.next=5,t.$axios.post("/affiliates/commissions/".concat(a,"/cash_out"),{dryrun:!1});case 5:s=e.sent,console.log(s),t.loading=!1,e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](2),t.loading=!1,console.error(e.t0),e.t0.response&&(console.error(e.t0.response),n=e.t0.response.data.error,alert("There's an issue with your cashout, please contact support: ".concat(n)));case 15:case"end":return e.stop()}}),e,null,[[2,10]])})))()},statusForCommission:function(t){var e=f()().subtract(1,"day").format("YYYY-MM-DD");return t.status?t.status:f()(t.payout_ready_date).isBefore(e)?"Payout Ready":"Pending"}},apollo:{commissions:{query:function(){return _},update:function(t){var e=t.network_commission;return e.map((function(t){return Object(r["a"])(Object(r["a"])({},t),{},{amount:t.commission_amount["amount"]})}))}},payableCommissions:{query:function(){return v},variables:function(){return{date:f()().subtract(1,"day").format("YYYY-MM-DD")}},update:function(t){var e=t.network_commission;return Object(x["reduce"])(e,(function(t,e){var a,s;return"USD"===(null===(a=e.commission_amount)||void 0===a?void 0:a.currency)?{USD:t["USD"]+parseFloat(null===(s=e.commission_amount)||void 0===s?void 0:s.amount)}:t}),{USD:0})}}}},h=g,w=a("2877"),b=Object(w["a"])(h,o,i,!1,null,null,null);e["default"]=b.exports}}]);
//# sourceMappingURL=chunk-2d0e509a.b96cc09c.js.map