(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0203bbc8"],{"60d1":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.$apollo.loading?n("Loader",{attrs:{attributeName:"product"}}):t.product?[t.showDefault?n("ProductDisplay",{attrs:{product:t.product,productStats:t.productStats}}):t._e(),t.showEdit?n("ProductCreateEditForm",{attrs:{product:t.product}}):t._e()]:n("Empty",{attrs:{message:"Product not found."}})],2)},a=[],r=n("2ef0"),o=n("873b"),d=n("c8d4"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col"},[n("athlane-page-header",{attrs:{title:"Product",text:"Manage your product "+t.product.name},scopedSlots:t._u(["brand"===t.$userType?{key:"buttons",fn:function(){return[n("div",{staticClass:"flex flex-row space-x-2"},[n("athlane-button",{attrs:{icon:"fas fa-trash-alt",text:"Delete Product",mode:"tertiary"},on:{click:function(e){t.showConfirmDeleteModal=!0}}}),n("athlane-button",{attrs:{icon:"fas fa-edit",text:"Edit Product"},on:{click:t.onEdit}})],1)]},proxy:!0}:null],null,!0)}),n("div",{staticClass:"overflow-y-scroll"},[n("div",{staticClass:"px-10 pt-6 pb-20"},[n("div",{staticClass:"\n\t\t\t\t\tflex\n\t\t\t\t\tw-full\n\t\t\t\t\tp-6\n\t\t\t\t\tspace-x-10\n\t\t\t\t\ttracking-wide\n\t\t\t\t\tbg-white\n\t\t\t\t\trounded\n\t\t\t\t\tshadow\n\t\t\t\t"},[n("div",[n("p",{staticClass:"text-gray-600"},[t._v("No. of activations")]),n("p",{staticClass:"text-xl font-medium text-gray-800"},[t._v(" "+t._s(t.productStats.activationCount)+" ")])]),n("div",[n("p",{staticClass:"text-gray-600"},[t._v("Influencer acceptance")]),n("p",{staticClass:"text-xl font-medium text-gray-800"},[t._v(" "+t._s(t.productStats.percentAccepted)+" ")])])]),n("div",{staticClass:"flex mt-5"},[n("div",{staticClass:"w-1/2 p-4 bg-white rounded shadow"},[t.product.image_url?n("a",{staticClass:"w-full center",staticStyle:{height:"32rem"},attrs:{href:t.product.product_url,target:"_blank"}},[n("img",{staticClass:"object-contain",staticStyle:{"max-height":"32rem","min-height":"16rem"},attrs:{src:t.shownImageUrl||t.product.image_url,alt:"product image"}})]):n("img",{staticClass:"inset-0 object-cover w-full rounded shadow",attrs:{src:t.$data.$cdn+"/img/product_unavailable.png",alt:"product unavailable"}}),t.product.images&&t.product.images.length?n("div",{staticClass:"flex flex-wrap w-full p-2 pt-6 mt-auto space-x-4"},t._l(t.product.images,(function(e){return n("img",{key:e,staticClass:"box-content h-24 shadow cursor-pointer",class:{"border-2 border-blue-300":t.highlightImage(e)},attrs:{src:e,alt:"Product image"},on:{click:function(n){return t.onClickImage(e)}}})})),0):t._e()]),n("div",{staticClass:"w-1/2 ml-6"},[n("div",{staticClass:"text-3xl font-medium text-gray-800 truncate"},[t._v(" "+t._s(t.product.name)+" ")]),n("div",{staticClass:"mb-2 font-medium tracking-wide text-gray-500"},[t._v(" "+t._s(t.variantNameMap[t.product.product_variant])+" ")]),n("div",{staticClass:"flex items-center mt-2"},[t.product.subtypes?n("div",{staticClass:"flex"},t._l(t.product.subtypes,(function(e){return n("ProductOptionTag",{key:e,attrs:{colorClass:"text-yellow-800  bg-orange-200",tooltip:"Product variant"}},[t._v(" "+t._s(e)+" ")])})),1):t._e(),t.product.size_options?n("div",[n("div",{staticClass:"flex"},t._l(t.product.size_options,(function(e){return n("ProductOptionTag",{key:e,attrs:{tooltip:"Product size options",colorClass:"text-teal-800 bg-teal-200"}},[t._v(" "+t._s(e)+" ")])})),1)]):t._e()]),n("div",{staticClass:"flex justify-between mt-2"},[n("p",{staticClass:"text-2xl font-medium text-green-500"},[t._v(" $"+t._s(t.product.value)+" ")])]),n("div",{staticClass:"flex justify-between mt-2"},[n("p",{staticClass:"\n\t\t\t\t\t\t\t\ttext-sm\n\t\t\t\t\t\t\t\tfont-normal\n\t\t\t\t\t\t\t\tleading-normal\n\t\t\t\t\t\t\t\ttext-gray-600\n\t\t\t\t\t\t\t\twhitespace-pre-wrap\n\t\t\t\t\t\t\t"},[t._v(" "+t._s(t.product.description)+" ")])])])])])]),t.showConfirmDeleteModal?n("Modal",{attrs:{open:t.showConfirmDeleteModal},on:{close:function(e){t.showConfirmDeleteModal=!1}}},[n("DeleteProduct",{attrs:{product:t.product},on:{close:function(e){t.showConfirmDeleteModal=!1}}})],1):t._e()],1)},s=[],u=n("fc11"),l=n("f3f3"),m=n("11de"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-full max-w-lg px-6 py-6 bg-white rounded-lg shadow-2xl"},[n("h2",{staticClass:"\n\t\t\tpb-4\n\t\t\ttext-2xl\n\t\t\tfont-semibold\n\t\t\tleading-tight\n\t\t\ttext-gray-900\n\t\t\tborder-b-2 border-gray-200\n\t\t"},[t._v(" Delete product ")]),n("p",{staticClass:"mt-4 text-gray-700"},[t._v(" Are you sure you want to delete this product? This will retire this product from all future uses. ")]),n("div",{staticClass:"mt-6"},[n("button",{staticClass:"\n\t\t\t\tpx-4\n\t\t\t\tpy-2\n\t\t\t\tfont-semibold\n\t\t\t\ttext-white\n\t\t\t\tbg-red-500\n\t\t\t\tborder border-transparent\n\t\t\t\trounded\n\t\t\t\thover:bg-red-600\n\t\t\t\tfocus:outline-none\n\t\t\t\tfocus:shadow-outline\n\t\t\t",attrs:{type:"button"},on:{click:t.onDeleteProduct}},[t._v(" Delete product ")]),n("button",{staticClass:"\n\t\t\t\tpx-4\n\t\t\t\tpy-2\n\t\t\t\tml-4\n\t\t\t\tfont-semibold\n\t\t\t\ttext-gray-800\n\t\t\t\tbg-white\n\t\t\t\tborder\n\t\t\t\trounded\n\t\t\t\thover:bg-gray-100\n\t\t\t\tfocus:outline-none\n\t\t\t\tfocus:shadow-outline\n\t\t\t",on:{click:function(e){return t.$emit("close")}}},[t._v(" Cancel ")])])])},f=[],v=n("c964"),g=(n("96cf"),n("a071")),k=n.n(g),h={props:{product:Object},methods:{onDeleteProduct:function(){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$apollo.mutate({mutation:k.a,variables:{id:t.product.id,changes:{retired:!0}}});case 3:t.$router.push("/products"),t.$notify({type:"success",title:"Success",text:"Product deleted!"}),t.$emit("close"),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$notify({type:"error",title:"Error",text:"An error occurred while deleting the product."});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}},_=h,b=n("2877"),w=Object(b["a"])(_,p,f,!1,null,null,null),y=w.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:t.tooltip,delay:{show:700}},expression:"{\n\t\tcontent: tooltip,\n\t\tdelay: {\n\t\t\tshow: 700\n\t\t}\n\t}"}],staticClass:"\n\t\tpx-2\n\t\tpy-1\n\t\ttext-xs\n\t\tleading-none\n\t\ttracking-wider\n\t\tuppercase\n\t\tcursor-default\n\t\tselect-none\n\t\tcenter\n\t"},[t._t("default")],2)},N=[],S={props:{tooltip:String}},C=S,O=Object(b["a"])(C,x,N,!1,null,null,null),D=O.exports,E=n("eac9"),F=n("0c92"),j=n.n(F),P={components:{DeleteProduct:y,Modal:m["a"],ProductOptionTag:D},props:{product:Object,productStats:Object},data:function(){return{shownImageUrl:"",showConfirmDeleteModal:!1,product_variants:null}},computed:{showMenuBar:function(){return"brand"===this.$userType},variantNameMap:function(){return this.product_variants?this.product_variants.reduce((function(t,e){return Object(l["a"])(Object(l["a"])({},t),{},Object(u["a"])({},e.product_variant,E["b"][e.product_variant]))}),{}):{}}},methods:{onClickImage:function(t){this.shownImageUrl=t},onEdit:function(){this.$router.push("/products/".concat(this.product.id,"/edit"))},highlightImage:function(t){return this.shownImageUrl?t===this.shownImageUrl:t===this.product.image_url}},apollo:{product_variants:{query:j.a}}},$=P,I=Object(b["a"])($,c,s,!1,null,null,null),V=I.exports,M=n("9c3a"),T=n("b104"),q=n("c6cfb"),z=n.n(q),A={components:{Empty:o["a"],Loader:d["a"],ProductDisplay:V,ProductCreateEditForm:M["a"]},props:{productId:String},data:function(){return{product:null,productStats:{}}},computed:{showDefault:function(){return!this.$route.params.subPage},showEdit:function(){return"edit"===this.$route.params.subPage}},apollo:{dataQuery:{query:z.a,variables:function(){return{product_id:this.$props.productId}},update:function(t){var e=Object(T["l"])(t.activation_counts_by_status.nodes),n=Object(r["sumBy"])(["STARTED","COMPLETED","CONFIRMED","ENDED","INCOMPLETE"],(function(t){return e[t]})),i=Object(r["sumBy"])(["EXPIRED","IGNORED"],(function(t){return e[t]}));this.product=t.product[0],this.productStats={activationCount:t.activation_count.aggregate.count,percentAccepted:Object(T["F"])(n/(n+i))}}}}},B=A,G=Object(b["a"])(B,i,a,!1,null,null,null);e["default"]=G.exports},"8ed0":function(t,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"Product"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"campaigns_product"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"organization_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"images"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"size_options"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subtypes"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"product_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"product_variant"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"retired"},arguments:[],directives:[]}]}}],loc:{start:0,end:183}};n.loc.source={body:"fragment Product on campaigns_product {\n  id\n  organization_id\n  name\n  description\n  value\n  image_url\n  images\n  size_options\n  subtypes\n  product_url\n  product_variant\n  retired\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function i(t,e){if("FragmentSpread"===t.kind)e.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&e.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){i(t,e)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){i(t,e)})),t.definitions&&t.definitions.forEach((function(t){i(t,e)}))}var a={};function r(t,e){for(var n=0;n<t.definitions.length;n++){var i=t.definitions[n];if(i.name&&i.name.value==e)return i}}function o(t,e){var n={kind:t.kind,definitions:[r(t,e)]};t.hasOwnProperty("loc")&&(n.loc=t.loc);var i=a[e]||new Set,o=new Set,d=new Set;i.forEach((function(t){d.add(t)}));while(d.size>0){var c=d;d=new Set,c.forEach((function(t){if(!o.has(t)){o.add(t);var e=a[t]||new Set;e.forEach((function(t){d.add(t)}))}}))}return o.forEach((function(e){var i=r(t,e);i&&n.definitions.push(i)})),n}(function(){n.definitions.forEach((function(t){if(t.name){var e=new Set;i(t,e),a[t.name.value]=e}}))})(),t.exports=n,t.exports["Product"]=o(n,"Product")},c6cfb:function(t,e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetProductByID"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"product_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"uuid"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"product"},name:{kind:"Name",value:"campaigns_product"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"id"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"product_id"}}}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Product"},directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"activation_count"},name:{kind:"Name",value:"campaigns_activation_aggregate"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"financial"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"product_offerings"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"product_id"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"product_id"}}}]}}]}}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"aggregate"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]}]}}]}},{kind:"Field",alias:{kind:"Name",value:"activation_counts_by_status"},name:{kind:"Name",value:"campaigns_activation_status_aggregate"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"activations"},name:{kind:"Name",value:"activations_aggregate"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"financial"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"product_offerings"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"product_id"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"_eq"},value:{kind:"Variable",name:{kind:"Name",value:"product_id"}}}]}}]}}]}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"aggregate"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:687}};i.loc.source={body:'#import "../fragments/Product.fragment.gql"\nquery GetProductByID($product_id: uuid) {\n  product: campaigns_product(where: { id: { _eq: $product_id } }) {\n    ...Product\n  }\n  activation_count: campaigns_activation_aggregate(\n    where: {\n      financial: { product_offerings: { product_id: { _eq: $product_id } } }\n    }\n  ) {\n    aggregate {\n      count\n    }\n  }\n  activation_counts_by_status: campaigns_activation_status_aggregate {\n    nodes {\n      status\n      activations: activations_aggregate(\n        where: {\n          financial: { product_offerings: { product_id: { _eq: $product_id } } }\n        }\n      ) {\n        aggregate {\n          count\n        }\n      }\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function r(t){return t.filter((function(t){if("FragmentDefinition"!==t.kind)return!0;var e=t.name.value;return!a[e]&&(a[e]=!0,!0)}))}function o(t,e){if("FragmentSpread"===t.kind)e.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&e.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){o(t,e)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){o(t,e)})),t.definitions&&t.definitions.forEach((function(t){o(t,e)}))}i.definitions=i.definitions.concat(r(n("8ed0").definitions));var d={};function c(t,e){for(var n=0;n<t.definitions.length;n++){var i=t.definitions[n];if(i.name&&i.name.value==e)return i}}function s(t,e){var n={kind:t.kind,definitions:[c(t,e)]};t.hasOwnProperty("loc")&&(n.loc=t.loc);var i=d[e]||new Set,a=new Set,r=new Set;i.forEach((function(t){r.add(t)}));while(r.size>0){var o=r;r=new Set,o.forEach((function(t){if(!a.has(t)){a.add(t);var e=d[t]||new Set;e.forEach((function(t){r.add(t)}))}}))}return a.forEach((function(e){var i=c(t,e);i&&n.definitions.push(i)})),n}(function(){i.definitions.forEach((function(t){if(t.name){var e=new Set;o(t,e),d[t.name.value]=e}}))})(),t.exports=i,t.exports["GetProductByID"]=s(i,"GetProductByID")}}]);
//# sourceMappingURL=chunk-0203bbc8.cc3276aa.js.map