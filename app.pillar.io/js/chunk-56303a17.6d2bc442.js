(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56303a17"],{7085:function(e,t,r){"use strict";r.r(t);var a,n,s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex flex-col"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.onSave.apply(null,arguments)}}},[r("FormSection",{attrs:{title:"Personal Information"}},[r("div",{staticClass:"grid grid-cols-1 lg:grid-cols-2 gap-x-2 gap-y-4 items-center"},[r("athlane-field",{attrs:{error:e.$error.user.first_name.$message,placeholder:"First Name",label:"First Name",required:""},model:{value:e.$v.user.first_name.$model,callback:function(t){e.$set(e.$v.user.first_name,"$model","string"===typeof t?t.trim():t)},expression:"$v.user.first_name.$model"}}),r("athlane-field",{attrs:{error:e.$error.user.last_name.$message,placeholder:"Last Name",label:"Last Name",required:""},model:{value:e.$v.user.last_name.$model,callback:function(t){e.$set(e.$v.user.last_name,"$model","string"===typeof t?t.trim():t)},expression:"$v.user.last_name.$model"}})],1),r("TextArea",{staticClass:"sm:col-span-2",attrs:{placeholder:"Bio",label:"Bio",icon:"fas fa-user",showCharacters:"",characterLimit:"500"},model:{value:e.user.bio,callback:function(t){e.$set(e.user,"bio","string"===typeof t?t.trim():t)},expression:"user.bio"}})],1),r("FormSection",{attrs:{title:"Account Info"}},[r("div",{staticClass:"grid items-start grid-cols-1 gap-x-2 gap-y-4 2xl:grid-cols-2"},[r("athlane-field",{attrs:{error:e.$error.user.email.$message,label:"Login Email",placeholder:"E-mail Address",icon:"fas fa-at",type:"email",required:""},model:{value:e.$v.user.email.$model,callback:function(t){e.$set(e.$v.user.email,"$model","string"===typeof t?t.trim():t)},expression:"$v.user.email.$model"}}),r("PhoneField",{attrs:{error:e.$error.user.phone_number.$message,placeholder:"Add your phone number here",label:"Phone Number",required:""},model:{value:e.$v.user.phone_number.$model,callback:function(t){e.$set(e.$v.user.phone_number,"$model","string"===typeof t?t.trim():t)},expression:"$v.user.phone_number.$model"}})],1)]),r("FormSection",{attrs:{title:"Password Change",subtext:"In order to complete your password change, you also need to type your old password."}},[r("athlane-field",{attrs:{error:e.$error.password.old_password.$message,placeholder:"Type your old password",label:"Old Password",icon:"fal fa-user-lock",type:"password"},model:{value:e.$v.password.old_password.$model,callback:function(t){e.$set(e.$v.password.old_password,"$model","string"===typeof t?t.trim():t)},expression:"$v.password.old_password.$model"}}),r("div",{staticClass:"flex items-center"},[r("athlane-field",{staticClass:"w-full",attrs:{error:e.$error.password.new_password.$message,placeholder:"Type your new password",label:"New Password",icon:"fas fa-user-lock",type:"password"},model:{value:e.$v.password.new_password.$model,callback:function(t){e.$set(e.$v.password.new_password,"$model","string"===typeof t?t.trim():t)},expression:"$v.password.new_password.$model"}}),r("athlane-field",{staticClass:"w-full ml-2",attrs:{error:e.$error.password.repeat_password.$message,placeholder:"Repeat your new password",label:"Confirm Password",icon:"fal fa-user-lock",type:"password",disabled:e.disableChangePassword},model:{value:e.$v.password.repeat_password.$model,callback:function(t){e.$set(e.$v.password.repeat_password,"$model","string"===typeof t?t.trim():t)},expression:"$v.password.repeat_password.$model"}})],1)],1),r("div",{staticClass:"flex justify-end"},[r("athlane-button",{attrs:{id:"logoutButton",type:"button",mode:"tertiary",icon:"fal fa-sign-out-alt",text:"Logout User"},on:{click:function(t){return e.$store.dispatch("logout",e.$isOnStreamlabs)}}}),r("athlane-button",{staticClass:"ml-2",attrs:{disabled:e.disableSubmit&&!1,type:"submit",text:"Save Information",icon:{"fas fa-fw fa-spin fa-spinner":e.$apollo.loading||e.loading,"fa-check fas fa-fw":!e.$apollo.loading&&!e.loading}}})],1)],1)])},i=[],o=r("c964"),l=r("e5e9"),u=(r("96cf"),r("5184")),d=r("1dce"),c=r("b5aed"),p=r("3e84"),f=r("68de"),m=r("61fb"),h=r("f5a3"),v=r("eef1"),b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex flex-col w-full px-4 py-6 bg-white shadow"},[r("div",{staticClass:"flex flex-row mb-4"},[r("athlane-profile-image",{attrs:{src:e.$user.profile_image,username:e.$constructUserFullName(e.$user),size:"24"}}),r("div",{staticClass:"flex flex-col justify-center pl-4"},[r("h1",{staticClass:"text-xl text-gray-900"},[e._v(" Upload "+e._s("user"===e.profileType?"Profile Photo":"Logotype")+" ")]),r("p",{staticClass:"text-xs leading-snug text-gray-600"},[e._v(" Recommended size: 500x500 ")]),r("input",{ref:"file",attrs:{type:"file",accept:"image/*",disabled:e.loading,hidden:""},on:{input:function(t){return e.onFileSelection(t.target.files)}}})])],1),r("div",{staticClass:"flex flex-row"},[r("athlane-button",{attrs:{mode:"tertiary",type:"button",disabled:!e.$user.profile_image,text:"Remove"},on:{click:function(t){return e.clearFile()}}}),r("athlane-button",{staticClass:"ml-2",attrs:{type:"button",disabled:e.loading,icon:{"fa-fw fa-spin fa-spinner fas":e.loading,"fa-file-image fa-fw fas":!e.loading},text:"Upload Image"},on:{click:function(t){return e.$refs.file.click()}}})],1)])},w=[],$=(r("fb6a"),r("a630"),r("3ca3"),r("2b0e")),g=r("c364"),_=r("a573"),y=r.n(_),x=$["default"].extend({props:{profileType:{type:String,required:!0}},data:function(){return{loading:!1}},methods:{onFileSelection:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.loading=!0,a=Array.from(e).slice(0,1)[0],r.next=4,t.uploadFile(a);case 4:case"end":return r.stop()}}),r)})))()},clearFile:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$apollo.mutate({mutation:y.a,variables:{user_id:e.$user.id,changes:{profile_image:null}}});case 2:return t.next=4,e.$store.dispatch("getUserRecord",e.$user.email);case 4:e.$notify({type:"success",title:"Success",text:"Your profile picture has been removed!"}),e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},uploadFile:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(g["g"])(e);case 2:if(a=r.sent,"error"!==a.status){r.next=6;break}return t.$notify({type:"error",title:"Error",text:"An error occurred."}),r.abrupt("return");case 6:return r.next=8,t.$apollo.mutate({mutation:y.a,variables:{user_id:t.$user.id,changes:{profile_image:a}}});case 8:return r.next=10,t.$store.dispatch("getUserRecord",t.$user.email);case 10:t.$notify({type:"success",title:"Success",text:"Your profile picture has been updated!"}),t.loading=!1;case 12:case"end":return r.stop()}}),r)})))()}}}),k=x,q=r("2877"),S=Object(q["a"])(k,b,w,!1,null,null,null),C=S.exports,P=r("f9d7"),O=r.n(P),j=Object(u["a"])(a||(a=Object(l["a"])(["\n\tmutation UpdateBannerCustomizations(\n\t\t$influencer_id: uuid!\n\t\t$customizations: jsonb!\n\t) {\n\t\tupdate_shop_banner(\n\t\t\twhere: { influencer_id: { _eq: $influencer_id } }\n\t\t\t_set: { customizations: $customizations }\n\t\t) {\n\t\t\taffected_rows\n\t\t}\n\t}\n"]))),N=Object(u["a"])(n||(n=Object(l["a"])(["\n\tquery GetShopBanner($influencer_id: uuid!) {\n\t\tbanner: shop_banner_by_pk(influencer_id: $influencer_id) {\n\t\t\tcustomizations\n\t\t\tbackground\n\t\t\turl_key\n\t\t}\n\t}\n"]))),z={mixins:[d["validationMixin"]],components:{FormSection:v["a"],ProfileImageHandler:C,PhoneField:m["a"],TextArea:h["a"]},data:function(){return{password:{old_password:null,new_password:null,repeat_password:null},user:{},shopBanner:null,loading:!1}},methods:{$changePassword:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$v.password.$dirty||e.$v.password.$invalid){t.next=14;break}return r=e.$data.password,a=r.old_password,n=r.new_password,t.prev=2,t.next=5,e.$store.dispatch("changePassword",{old_password:a,new_password:n});case 5:return e.$data.password.old_password=null,e.$data.password.new_password=null,e.$data.password.repeat_password=null,t.abrupt("return",!0);case 11:throw t.prev=11,t.t0=t["catch"](2),null===t.t0||void 0===t.t0?void 0:t.t0.message;case 14:return t.abrupt("return",!1);case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},onSave:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,i,o,l,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$v.user.$touch(),e.$v.$invalid){t.next=28;break}return t.prev=2,e.$data.loading=!0,a=e.$user.id,n=e.$data.user,s=n.first_name,i=n.last_name,o=n.email,l=n.phone_number,u=n.bio,t.next=8,e.$apollo.mutate({mutation:y.a,variables:{user_id:a,changes:{first_name:s,last_name:i,email:o.toLowerCase(),phone_number:Object(p["a"])(l,"US").number,bio:u}}});case 8:if(!e.$data.password.old_password||!e.$data.password.new_password){t.next=11;break}return t.next=11,e.$changePassword();case 11:return t.next=13,e.$apollo.queries.shopBanner.refetch();case 13:if(""!==(null===(r=e.shopBanner)||void 0===r?void 0:r.customizations.custom_name)){t.next=16;break}return t.next=16,e.$apollo.mutate({mutation:j,variables:{influencer_id:e.$user.influencer.id,customizations:{custom_name:null!==(d=null===u||void 0===u?void 0:u.substring(0,100))&&void 0!==d?d:""}}});case 16:e.$store.dispatch("getUserRecord",o),e.$v.$reset(),e.$apollo.queries.user.refetch(),e.$notify({type:"success",title:"Information Saved",text:"Your personal information was saved!"}),t.next=25;break;case 22:t.prev=22,t.t0=t["catch"](2),e.$notify({type:"error",title:"Submission Error",text:"There was an error when saving. Check your password and try again."});case 25:return t.prev=25,e.$data.loading=!1,t.finish(25);case 28:case"end":return t.stop()}}),t,null,[[2,22,25,28]])})))()}},apollo:{user:{query:O.a,variables:function(){return{user_id:this.$user.id}}},shopBanner:{query:N,variables:function(){return{influencer_id:this.$user.influencer.id}},update:function(e){return e.banner},skip:function(){return!this.$user.influencer}}},computed:{disableSubmit:function(){var e=this.$v.user,t=this.$v.password;return this.$apollo.loading||this.loading||e.$invalid&&(!t.$anyDirty||t.$invalid)},disableChangePassword:function(){return!this.$data.password.old_password||!this.$data.password.new_password},$error:function(){var e={user:{id:{required:"There was a problem with your user ID",alpha:"There was a problem with your user ID"},first_name:{required:"Please enter your first name.",alpha:"Please enter only letters."},last_name:{required:"Please enter your last name.",alpha:"Please enter only letters."},email:{required:"Please enter your e-mail address.",email:"Please enter a valid email address."},phone_number:{required:"Please enter your phone number.",validPhoneNumber:"Please enter a valid phone number."}},password:{old_password:{required:"Please enter your old password.",minLength:"Password should be at least 6 characters."},new_password:{required:"Please choose a new password.",minLength:"Password should be at least 6 characters."},repeat_password:{sameAs:"Please confirm your new password."}}};return Object(f["a"])(e,this.$v),e}},validations:function(){return{user:{id:{required:c["required"],alpha:f["e"]},first_name:{required:c["required"],alpha:f["b"]},last_name:{required:c["required"],alpha:f["b"]},email:{required:c["required"],email:c["email"]},phone_number:{required:c["required"],validPhoneNumber:function(e){var t,r;return Boolean(e)&&null!==(t=null===(r=Object(p["a"])(e,"US"))||void 0===r?void 0:r.isValid())&&void 0!==t&&t}}},password:{old_password:{required:Object(c["requiredUnless"])((function(e){return this.disableChangePassword})),minLength:Object(c["minLength"])(6)},new_password:{required:Object(c["requiredIf"])((function(e){return!this.disableChangePassword})),minLength:Object(c["minLength"])(6)},repeat_password:{required:Object(c["requiredIf"])((function(e){return!this.disableChangePassword})),sameAs:Object(c["sameAs"])("new_password")}}}}},E=z,R=Object(q["a"])(E,s,i,!1,null,null,null);t["default"]=R.exports},8107:function(e,t,r){},a54e:function(e,t,r){"use strict";r("8107")},eef1:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex flex-col my-4 space-y-4"},[r("div",{staticClass:"flex flex-col space-y-2"},[r("div",{staticClass:"text-lg",class:{"text-gray-800":!e.$props.dark,"text-gray-100":e.$props.dark}},[e._v(" "+e._s(e.title)+" ")]),r("div",{class:{"text-gray-500":!e.$props.dark,"text-gray-300":e.$props.dark}},[e._v(" "+e._s(e.subtext)+" "),e._t("subtext")],2)]),r("div",{staticClass:"flex flex-col space-y-3"},[e._t("default")],2)])},n=[],s=r("2b0e"),i=s["default"].extend({props:{title:{type:String,required:!1},subtext:{type:String,required:!1},dark:{type:Boolean,default:!1}}}),o=i,l=r("2877"),u=Object(l["a"])(o,a,n,!1,null,null,null);t["a"]=u.exports},f5a3:function(e,t,r){"use strict";var a,n,s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{staticClass:"flex flex-col"},[e.label||e.subtext?r("div",{staticClass:"mb-1"},[e.label?r("div",{staticClass:"block text-sm font-medium text-gray-700"},[e._v(" "+e._s(e.label)+" "),e.required?r("span",{staticClass:"ml-1 text-yellow-500"},[e._v("*")]):e._e()]):e._e(),e.subtext?r("span",{staticClass:"block text-xs text-gray-600 dark:text-gray-300"},[e._v(" "+e._s(e.subtext)+" ")]):e._e()]):e._e(),r("div",{staticClass:"relative"},[r("resize-auto",{scopedSlots:e._u([{key:"default",fn:function(t){var a=t.resize;return[r("textarea",e._b({staticClass:"box-border block w-full h-32 min-w-0 px-4 py-3 text-black placeholder-gray-400 transition-colors duration-100 ease-in-out bg-white border border-gray-200 rounded-lg shadow-sm appearance-none resize-none dark:bg-gray-600 dark:text-white dark:border-gray-700 dark:focus:border-indigo-300 dark:bg-gray-800 focus:border-indigo-500 focus:outline-none",class:{"border-red-500":e.$props.error,"shadow-sm":!e.$props.flat},attrs:{maxlength:e.characterLimit},domProps:{value:e.value},on:{input:function(t){return e.onInput(t,a)},focus:function(t){e.active=!0},blur:function(t){e.active=!1},change:function(t){return e.$emit("change",t.target.value)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("enter",t)}}},"textarea",e.$attrs,!1))]}}])})],1),e.characterLimit&&e.showCharacters?r("div",{staticClass:"mt-1 text-xs text-gray-400"},[e._v(" "+e._s(e.value?e.value.length:0)+" / "+e._s(e.characterLimit)+" characters ")]):e._e(),!e.hideError&&e.$props.error?r("span",{staticClass:"block my-1 text-sm tracking-wide text-red-500"},[e._v(" "+e._s(e.errorMessage)+" ")]):e._e()])},i=[],o=r("2b0e"),l={name:"ResizeAuto",methods:{resize:function(e){e.target.style.height="auto",e.target.style.height="".concat(e.target.scrollHeight,"px")}},mounted:function(){var e=this;this.$nextTick((function(){var t=e.$el.scrollHeight+10;e.$el.setAttribute("style","height:".concat(t,"px"))}))},render:function(){return this.$scopedSlots.default({resize:this.resize})}},u=l,d=r("2877"),c=Object(d["a"])(u,a,n,!1,null,null,null),p=c.exports,f=o["default"].extend({inheritAttrs:!1,components:{ResizeAuto:p},props:{showCharacters:{type:Boolean,default:!1},characterLimit:{type:String,default:null},error:{type:String,required:!1},hideError:{type:Boolean,default:!1},flat:{type:Boolean,default:!1},label:{type:String,required:!1},subtext:{type:String,required:!1},required:{type:Boolean,default:!1},value:{type:String,required:!1},dynamicResize:{type:Boolean,default:!1}},data:function(){return{active:!1}},computed:{errorMessage:function(){var e;return null!==(e=this.$props.error)&&void 0!==e?e:"Error: "}},methods:{onInput:function(e,t){this.$emit("input",e.target.value),!this.$props.dynamicResize||t(e)}}}),m=f,h=(r("a54e"),Object(d["a"])(m,s,i,!1,null,null,null));t["a"]=h.exports},f9d7:function(e,t,r){var a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"uuid"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"user"},name:{kind:"Name",value:"users_user_by_pk"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"User"},directives:[]}]}}]}}],loc:{start:0,end:133}};a.loc.source={body:'#import "../fragments/User.fragment.gql"\nquery GetUser($user_id: uuid!) {\n  user: users_user_by_pk(id: $user_id) {\n    ...User\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function s(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!n[t]&&(n[t]=!0,!0)}))}function i(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var r=e.type;"NamedType"===r.kind&&t.add(r.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){i(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){i(e,t)})),e.definitions&&e.definitions.forEach((function(e){i(e,t)}))}a.definitions=a.definitions.concat(s(r("9c6d").definitions));var o={};function l(e,t){for(var r=0;r<e.definitions.length;r++){var a=e.definitions[r];if(a.name&&a.name.value==t)return a}}function u(e,t){var r={kind:e.kind,definitions:[l(e,t)]};e.hasOwnProperty("loc")&&(r.loc=e.loc);var a=o[t]||new Set,n=new Set,s=new Set;a.forEach((function(e){s.add(e)}));while(s.size>0){var i=s;s=new Set,i.forEach((function(e){if(!n.has(e)){n.add(e);var t=o[e]||new Set;t.forEach((function(e){s.add(e)}))}}))}return n.forEach((function(t){var a=l(e,t);a&&r.definitions.push(a)})),r}(function(){a.definitions.forEach((function(e){if(e.name){var t=new Set;i(e,t),o[e.name.value]=t}}))})(),e.exports=a,e.exports["GetUser"]=u(a,"GetUser")}}]);
//# sourceMappingURL=chunk-56303a17.6d2bc442.js.map