(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c29c71a0"],{"82ff":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"flex flex-row items-center mx-1 my-2 leading-tight cursor-pointer select-none"},[a("input",t._b({staticClass:"form-checkbox cursor-pointer",class:{error:t.$props.error,dark:t.$props.dark},attrs:{type:"checkbox"},domProps:{checked:t.checked},on:{change:function(e){return t.$emit("change",e.target.checked)}}},"input",t.$attrs,!1)),a("div",{staticClass:"flex flex-col pl-4"},[a("p",{staticClass:"block text-sm font-medium",class:{"text-gray-700":!t.$props.dark,"text-gray-200":t.$props.dark}},[t._v(" "+t._s(t.label)+" "),t._t("default")],2),t.subtext?a("p",{staticClass:"mt-1 text-xs text-gray-500"},[t._v(t._s(t.subtext))]):t._e(),!t.hideError&&t.$props.error?a("p",{staticClass:"text-sm text-red-500"},[t._v(" "+t._s(t.errorMessage)+" ")]):t._e()])])},n=[],i=a("2b0e"),s=i["default"].extend({inheritAttrs:!1,model:{prop:"checked",event:"change"},props:{dark:{type:Boolean,default:!1},error:{required:!1},hideError:{type:Boolean,default:!1},label:{type:String,required:!1},subtext:{type:String,required:!1},checked:{type:Boolean,required:!0,default:!1}},computed:{errorMessage:function(){var t;return null!==(t=this.$props.error)&&void 0!==t?t:"Error: "}}}),o=s,l=(a("dd65"),a("2877")),c=Object(l["a"])(o,r,n,!1,null,null,null);e["a"]=c.exports},bac2:function(t,e,a){"use strict";a.r(e);var r,n,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"py-20 center"},[a("div",{staticClass:"flex flex-col w-full h-full max-w-2xl"},[a("router-link",{staticClass:"h-20 mb-6 center",attrs:{to:"/"}},[a("img",{staticClass:"max-w-full max-h-full",attrs:{src:t.$data.$cdn+"/logos/athlane/logo_black.png",alt:"Athlane Logo",role:"presentation"}})]),t.isSubmitted?a("div",{staticClass:"flex-col mt-20 center"},[a("i",{staticClass:"text-4xl text-athlane-blue fas fa-check-circle"}),a("div",{staticClass:"mt-4 text-lg font-light"},[t._v(" Success! Check your inbox for an email to register. ")])]):a("div",{staticClass:"flex flex-col"},[a("div",{staticClass:"flex flex-col"},[a("div",{staticClass:"text-xl font-bold text-gray-800"},[t._v("Create Organization")]),a("div",{staticClass:"text-sm text-gray-600"},[t._v(" Welcome! Creating an organization empowers you to connect to your network of streamers and boost your digital marketing with new age streamers and content creators from around the world. ")]),a("div",{staticClass:"mt-6"},[a("div",{staticClass:"text-xs tracking-wide uppercase text-athlane-blue"},[t._v(" Organization Information ")]),a("athlane-field",{staticClass:"mt-2",attrs:{error:t.errors.organization.name,icon:"fas fa-building",label:"Organization Name",required:""},model:{value:t.organization.name,callback:function(e){t.$set(t.organization,"name",e)},expression:"organization.name"}}),a("athlane-field",{staticClass:"mt-2",attrs:{error:t.errors.organization.website_url,icon:"fas fa-link",label:"Organization URL",required:""},model:{value:t.organization.website_url,callback:function(e){t.$set(t.organization,"website_url",e)},expression:"organization.website_url"}})],1),a("div",{staticClass:"mt-6"},[a("div",{staticClass:"text-xs tracking-wide uppercase text-athlane-blue"},[t._v(" Your Information ")]),a("div",{staticClass:"flex items-start mt-2"},[a("athlane-field",{staticClass:"w-full",attrs:{error:t.errors.manager.firstName,icon:"fas fa-user",label:"First Name",required:""},model:{value:t.manager.firstName,callback:function(e){t.$set(t.manager,"firstName",e)},expression:"manager.firstName"}}),a("athlane-field",{staticClass:"w-full ml-2",attrs:{error:t.errors.manager.lastName,icon:"fas fa-user",label:"Last Name",required:""},model:{value:t.manager.lastName,callback:function(e){t.$set(t.manager,"lastName",e)},expression:"manager.lastName"}})],1),a("athlane-field",{staticClass:"mt-2",attrs:{error:t.errors.manager.email,icon:"fas fa-envelope",label:"Email",required:""},model:{value:t.manager.email,callback:function(e){t.$set(t.manager,"email",e)},expression:"manager.email"}})],1),a("Checkbox",{staticClass:"flex-auto mt-6",attrs:{error:t.errors.isTOSAccepted,label:"I have reviewed and agree to the",required:""},model:{value:t.isTOSAccepted,callback:function(e){t.isTOSAccepted=e},expression:"isTOSAccepted"}},[a("router-link",{staticClass:"\n\t\t\t\t\t\t\tfont-bold\n\t\t\t\t\t\t\ttext-athlane-blue\n\t\t\t\t\t\t\thover:border-b hover:border-athlane-blue\n\t\t\t\t\t\t\thover:-mb-px\n\t\t\t\t\t\t",attrs:{to:"/terms"}},[t._v(" Athlane Terms of Service. ")])],1)],1),a("athlane-button",{staticClass:"mt-4",attrs:{text:"Let's do it!",icon:{"fas fa-rocket-launch":!t.isLoading,"fas fa-spin fa-spinner":t.isLoading}},on:{click:t.onSubmit}})],1)],1)])},s=[],o=a("0122"),l=a("c964"),c=a("f3f3"),u=a("e5e9"),m=(a("caad"),a("2532"),a("b0c0"),a("b64b"),a("96cf"),a("5184")),d=a("2ef0"),f=a("82ff"),g={organization:{name:null,website_url:null},manager:{firstName:null,lastName:null,email:null},isTOSAccepted:!1},p=Object(m["a"])(r||(r=Object(u["a"])(["\n\tmutation InsertOrganization($organization: users_organization_insert_input!) {\n\t\tinsert_users_organization(objects: [$organization]) {\n\t\t\treturning {\n\t\t\t\tid\n\t\t\t}\n\t\t}\n\t}\n"]))),b=Object(m["a"])(n||(n=Object(u["a"])(["\n\tmutation InsertOrgInvitation(\n\t\t$invitation: users_org_invitation_insert_input!\n\t) {\n\t\tinsert_users_org_invitation(objects: [$invitation]) {\n\t\t\taffected_rows\n\t\t}\n\t}\n"]))),h={components:{Checkbox:f["a"]},data:function(){return Object(c["a"])(Object(c["a"])({},g),{},{errors:Object(d["cloneDeep"])(g),isLoading:!1,isSubmitted:!1})},methods:{onSubmit:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.validate(),!a){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t.insertObjects();case 5:case"end":return e.stop()}}),e)})))()},insertOganization:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a,r,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=t.organization.website_url,t.organization.website_url=a.includes("http")?a:"https://".concat(a),e.next=5,t.$apollo.mutate({mutation:p,variables:{organization:t.organization}});case 5:return r=e.sent,n=r.data.insert_users_organization.returning,i=n[0].id,e.abrupt("return",i);case 11:e.prev=11,e.t0=e["catch"](0),t.$notify({type:"error",title:"Error",text:"An error occurred while creating your organization."});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},insertUser:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var r,n,i,s,o,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,r=e.manager.email.toLowerCase(),n=e.manager.firstName,i=e.manager.lastName,s=t,o=e.$data.organization.name,l={invitation:{admin:!0,email:r,first_name:n,last_name:i,org_id:s,org_name:o,user:{data:{email:r,first_name:n,last_name:i,memberships:{data:[{admin:!0,org_id:s}]}}}}},a.next=9,e.$apollo.mutate({mutation:b,variables:l});case 9:return a.abrupt("return",!0);case 12:a.prev=12,a.t0=a["catch"](0),console.error(a.t0),e.$notify({type:"error",title:"Error",text:"An error occurred while creating your membership invitation."});case 16:case"end":return a.stop()}}),a,null,[[0,12]])})))()},insertObjects:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,t.insertOganization();case 3:if(a=e.sent,a){e.next=7;break}return t.isLoading=!1,e.abrupt("return");case 7:return e.next=9,t.insertUser(a);case 9:if(r=e.sent,r){e.next=13;break}return t.isLoading=!1,e.abrupt("return");case 13:t.isSubmitted=!0;case 14:case"end":return e.stop()}}),e)})))()},validate:function(){for(var t=["organization","manager","isTOSAccepted"],e=!1,a=0,r=t;a<r.length;a++){var n=r[a];if("object"===Object(o["a"])(this[n]))for(var i=0,s=Object.keys(this[n]);i<s.length;i++){var l=s[i];this[n][l]||(this.errors[n][l]="Required.",e=!0)}else this[n]||(this.errors[n]="Required.",e=!0)}return e}}},x=h,v=a("2877"),_=Object(v["a"])(x,i,s,!1,null,null,null);e["default"]=_.exports},c5e8:function(t,e,a){},dd65:function(t,e,a){"use strict";a("c5e8")}}]);
//# sourceMappingURL=chunk-c29c71a0.fe2f14ce.js.map